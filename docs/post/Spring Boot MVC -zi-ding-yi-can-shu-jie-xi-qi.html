<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link href="https://unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />
<link href="https://unpkg.com/@primer/css@^21.0.7/dist/primer.css" rel="stylesheet" />

</head>
<style>
.markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 900px;
    margin: 10px auto;
    padding: 45px;
    font-family: sans-serif;
}
@media (max-width: 560px) {
    .markdown-body { padding: 8px;} 
}

.avatar {transition: 0.8s;}
.avatar:hover {transform: scale(1.15) rotate(360deg);}

h1 {display:flex;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right button{margin-left:8px;padding:16px;}
.SideNav{min-width: 360px;}
.SideNav-icon{margin-right: 16px}
#postBody{border-bottom: 1px solid var(--color-border-default);}
#comments{margin-top:64px;}
.footer {margin: 40px auto; text-align: center;font-size: small;}
#cmButton{height:48px;margin-top:48px;}
</style>
<script>var blogBase={"postTitle": "Spring Boot MVC \u81ea\u5b9a\u4e49\u53c2\u6570\u89e3\u6790\u5668", "postBody": "<h2 id=\"user-content-\u80cc\u666f\"><a class=\"heading-link\" href=\"#\u80cc\u666f\">\u80cc\u666f<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h2>\n<blockquote>\n<p><code>\u9057\u7559\u7cfb\u7edf</code>\uff1a</p>\n<p>\u200b\t\t\u9057\u7559\u63a5\u53e3\u7cfb\u7edf\u4e3a Golang + Gin + MongoDB \u5b9e\u73b0, MongoDB collection \u7684 field \u5b57\u6bb5\u4e3a\u4e2d\u6587\u540d\u800c\u4e14\u4e0d\u56fa\u5b9a(\u53ef\u4ee5\u901a\u8fc7 excel \u6587\u4ef6\u81ea\u5b9a\u4e49\u8868\u5934\u7684\u5f62\u5f0f\u6dfb\u52a0), \u67e5\u8be2\u53c2\u6570\u662f\u76f4\u63a5\u4f20\u7684\u4e2d\u6587\u5f62\u5f0f, \u800c\u4e14\u4f20\u53c2\u4e0d\u56fa\u5b9a(query\u53c2\u6570\u7684 key \u548c value \u90fd\u4e0d\u56fa\u5b9a)\uff0c\u5982\uff1a<strong>/api/v1/customers?\u59d3\u540d=\u5f20\u4e09&amp;\u5f55\u5165\u65f6\u95f4=2022-09-01 00:00:00&amp;\u5f55\u5165\u65f6\u95f4=2022-09-02 23:59:59</strong></p>\n<p><code>\u95ee\u9898</code>\uff1a</p>\n<p>\u200b\t\tgo \u5de5\u7a0b\u5e08\u79bb\u804c, \u540e\u7aef\u53ea\u6709 java \u5de5\u7a0b\u5e08\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u6b64\u63a5\u53e3\u6539\u7528 java \u91cd\u5199\u4e00\u904d\uff0c\u4f46\u4f20\u53c2\u65b9\u5f0f\u4e0d\u53d8(query key \u8fd8\u662f\u4e3a\u4e2d\u6587)</p>\n</blockquote>\n<h2 id=\"user-content-\u5b9e\u73b0\"><a class=\"heading-link\" href=\"#\u5b9e\u73b0\">\u5b9e\u73b0<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h2>\n<h3 id=\"user-content-\u53ef\u9009\u65b9\u6848\"><a class=\"heading-link\" href=\"#\u53ef\u9009\u65b9\u6848\">\u53ef\u9009\u65b9\u6848<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h3>\n<ul>\n<li>\n<strong>\u65b9\u6848\u4e00</strong>\uff1a\u4e0d\u7528 java \u6539\u5199\uff0cjava \u5de5\u7a0b\u5e08\u7ef4\u62a4 golang \u9879\u76ee\n<ul>\n<li>\u4f18\u70b9\uff1a\u4ee3\u7801\u6539\u52a8\u6700\u5c0f\uff0c\u51fa\u73b0 bug \u7684\u6982\u7387\u4e5f\u6700\u5c0f</li>\n<li>\u7f3a\u70b9\uff1a\u9700\u8981\u82b1\u65f6\u95f4\u5b66\u4e60 go \u8bed\u8a00\u548c\u76f8\u5173\u9879\u76ee</li>\n</ul>\n</li>\n<li>\n<strong>\u65b9\u6848\u4e8c</strong>\uff1a\u83b7\u53d6 HttpServletRequset \u5bf9\u8c61, \u5728\u76f8\u5e94\u7684\u63a5\u53e3\u5165\u53e3\u5c42\u8fdb\u884c\u53c2\u6570\u5904\u7406\n<ul>\n<li>\u4f18\u70b9\uff1a\u80fd\u591f\u83b7\u53d6\u5230\u6240\u6709\u53c2\u6570\uff0c\u5feb\u901f\u5b9e\u73b0\u529f\u80fd</li>\n<li>\u7f3a\u70b9\uff1a\u9488\u5bf9\u7279\u5b9a\u63a5\u53e3\u5b9e\u73b0\uff0c\u4e0d\u5229\u4e8e\u4ee3\u7801\u6269\u5c55</li>\n</ul>\n</li>\n<li>\n<strong>\u65b9\u6848\u4e09</strong>\uff1a\u81ea\u5b9a\u4e49 MVC \u5c42\u53c2\u6570\u89e3\u6790\u5668\u89e3\u6790\u8bf7\u6c42\u53c2\u6570\u5e76\u7ed1\u5b9a\n<ul>\n<li>\u4f18\u70b9\uff1a\u80fd\u591f\u62bd\u53d6\u6b64\u7c7b\u9700\u6c42\u7684\u516c\u5171\u53c2\u6570,\u7ed3\u5408\u53cd\u5c04\u548c\u6ce8\u89e3\u673a\u5236\u5229\u4e8e\u76f8\u4f3c\u9700\u6c42\u7684\u6269\u5c55</li>\n<li>\u7f3a\u70b9\uff1a\u76f8\u5bf9\u4e8e\u65b9\u6848\u4e8c\u6027\u80fd\u53ef\u80fd\u4f1a\u5dee\u4e00\u70b9\u3002\n<ul>\n<li>\u6d89\u53ca\u5230\u53cd\u5c04\u5904\u7406</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"user-content-\u65b9\u6848\u4e09\u5b9e\u73b0\"><a class=\"heading-link\" href=\"#\u65b9\u6848\u4e09\u5b9e\u73b0\">\u65b9\u6848\u4e09\u5b9e\u73b0<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h3>\n<ul>\n<li>MVC \u65b9\u6cd5\u53c2\u6570\u5904\u7406\u5668\u63a5\u53e3 <strong>HandlerMethodArgumentResolver</strong>\n</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-k\">public</span> <span class=\"pl-k\">interface</span> <span class=\"pl-smi\">HandlerMethodArgumentResolver</span> {\n\n\t<span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">\t * \u6b64\u89e3\u6790\u5668\u662f\u5426\u652f\u6301\u8be5\u65b9\u6cd5\u53c2\u6570\u7684\u89e3\u6790</span>\n<span class=\"pl-c\">\t */</span>\n\t<span class=\"pl-smi\">boolean</span> <span class=\"pl-en\">supportsParameter</span>(<span class=\"pl-smi\">MethodParameter</span> <span class=\"pl-s1\">parameter</span>);\n\n\t<span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">\t * \u5c06\u62ff\u5230\u7684\u539f\u59cb\u6570\u636e\u89e3\u6790\u6210\u60f3\u8981\u7684\u53c2\u6570\u5bf9\u8c61</span>\n<span class=\"pl-c\">\t * A {@link ModelAndViewContainer} provides access to the model for the</span>\n<span class=\"pl-c\">\t * request. A {@link WebDataBinderFactory} provides a way to create</span>\n<span class=\"pl-c\">\t * a {@link WebDataBinder} instance when needed for data binding and</span>\n<span class=\"pl-c\">\t * type conversion purposes.</span>\n<span class=\"pl-c\">\t * @param parameter the method parameter to resolve. This parameter must</span>\n<span class=\"pl-c\">\t * have previously been passed to {@link #supportsParameter} which must</span>\n<span class=\"pl-c\">\t * have returned {@code true}.</span>\n<span class=\"pl-c\">\t * @param mavContainer the ModelAndViewContainer for the current request</span>\n<span class=\"pl-c\">\t * @param webRequest the current request</span>\n<span class=\"pl-c\">\t * @param binderFactory a factory for creating {@link WebDataBinder} instances</span>\n<span class=\"pl-c\">\t * @return the resolved argument value, or {@code null} if not resolvable</span>\n<span class=\"pl-c\">\t * @throws Exception in case of errors with the preparation of argument values</span>\n<span class=\"pl-c\">\t */</span>\n\t<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Nullable</span>\n\t<span class=\"pl-smi\">Object</span> <span class=\"pl-en\">resolveArgument</span>(<span class=\"pl-smi\">MethodParameter</span> <span class=\"pl-s1\">parameter</span>, <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Nullable</span> <span class=\"pl-smi\">ModelAndViewContainer</span> <span class=\"pl-s1\">mavContainer</span>,\n\t\t\t<span class=\"pl-smi\">NativeWebRequest</span> <span class=\"pl-s1\">webRequest</span>, <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Nullable</span> <span class=\"pl-smi\">WebDataBinderFactory</span> <span class=\"pl-s1\">binderFactory</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">Exception</span>;\n\n}</pre></div>\n<ul>\n<li>\u5b9e\u73b0\u81ea\u5b9a\u4e49\u65b9\u6cd5\u53c2\u6570\u5904\u7406\u5668</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c1\">@</span><span class=\"pl-c1\">Slf4j</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">ZhFieldRequestResolver</span> <span class=\"pl-k\">implements</span> <span class=\"pl-smi\">HandlerMethodArgumentResolver</span> {\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Override</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">boolean</span> <span class=\"pl-en\">supportsParameter</span>(<span class=\"pl-smi\">MethodParameter</span> <span class=\"pl-s1\">parameter</span>) {\n        <span class=\"pl-c\">// \u6709 ZhBindConvertor \u6ce8\u89e3\u7684\u53c2\u6570\u624d\u8fdb\u884c\u89e3\u6790\u8f6c\u6362</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">parameter</span>.<span class=\"pl-en\">hasParameterAnnotation</span>(<span class=\"pl-smi\">ZhBindConvertor</span>.<span class=\"pl-k\">class</span>);\n    }\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Override</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">Object</span> <span class=\"pl-en\">resolveArgument</span>(<span class=\"pl-smi\">MethodParameter</span> <span class=\"pl-s1\">parameter</span>, <span class=\"pl-smi\">ModelAndViewContainer</span> <span class=\"pl-s1\">mavContainer</span>,\n                                  <span class=\"pl-smi\">NativeWebRequest</span> <span class=\"pl-s1\">webRequest</span>, <span class=\"pl-smi\">WebDataBinderFactory</span> <span class=\"pl-s1\">binderFactory</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">Exception</span> {\n        <span class=\"pl-smi\">HttpServletRequest</span> <span class=\"pl-s1\">request</span> = <span class=\"pl-s1\">webRequest</span>.<span class=\"pl-en\">getNativeRequest</span>(<span class=\"pl-smi\">HttpServletRequest</span>.<span class=\"pl-k\">class</span>);\n        <span class=\"pl-k\">assert</span> <span class=\"pl-s1\">request</span> != <span class=\"pl-c1\">null</span>;\n        <span class=\"pl-c\">// \u83b7\u53d6\u53c2\u6570\u7c7b\u578b\uff0c\u6839\u636e\u53c2\u6570\u7c7b\u578b\u53cd\u5c04\u521b\u5efa\u7c7b\u578b\u5b9e\u4f8b</span>\n        <span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">resultType</span> = <span class=\"pl-s1\">parameter</span>.<span class=\"pl-en\">getParameterType</span>();\n        <span class=\"pl-k\">return</span> <span class=\"pl-en\">buildResultObject</span>(<span class=\"pl-s1\">resultType</span>, <span class=\"pl-s1\">request</span>);\n    }\n\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Object</span> <span class=\"pl-en\">buildResultObject</span>(<span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">resultType</span>, <span class=\"pl-smi\">HttpServletRequest</span> <span class=\"pl-s1\">request</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">InvocationTargetException</span>,\n            <span class=\"pl-smi\">NoSuchMethodException</span>, <span class=\"pl-smi\">InstantiationException</span>, <span class=\"pl-smi\">IllegalAccessException</span>, <span class=\"pl-smi\">IOException</span> {\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">method</span> = <span class=\"pl-s1\">request</span>.<span class=\"pl-en\">getMethod</span>();\n        <span class=\"pl-c\">// \u6839\u636e\u4e0d\u540c\u7684 http \u65b9\u6cd5\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u53c2\u6570\u6784\u5efa\u6a21\u5f0f</span>\n        <span class=\"pl-k\">return</span> <span class=\"pl-k\">switch</span> (<span class=\"pl-s1\">method</span>) {\n            <span class=\"pl-k\">case</span> <span class=\"pl-s\">\"POST\"</span> -&gt; <span class=\"pl-en\">buildResultObjectForPost</span>(<span class=\"pl-s1\">resultType</span>, <span class=\"pl-s1\">request</span>);\n            <span class=\"pl-k\">case</span> <span class=\"pl-s\">\"GET\"</span> -&gt; <span class=\"pl-en\">buildResultObjectForGet</span>(<span class=\"pl-s1\">resultType</span>, <span class=\"pl-s1\">request</span>);\n            <span class=\"pl-k\">default</span> -&gt; <span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">IllegalStateException</span>(<span class=\"pl-s\">\"\u4e0d\u652f\u6301\u7684 http \u65b9\u6cd5\u7c7b\u578b: \"</span> + <span class=\"pl-s1\">method</span>);\n        };\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * GET \u65b9\u6cd5\u76f4\u63a5\u901a\u8fc7 {@link ServletRequest#getParameterMap()} \u65b9\u6cd5\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Object</span> <span class=\"pl-en\">buildResultObjectForGet</span>(<span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">resultType</span>, <span class=\"pl-smi\">HttpServletRequest</span> <span class=\"pl-s1\">request</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">NoSuchMethodException</span>,\n            <span class=\"pl-smi\">InvocationTargetException</span>, <span class=\"pl-smi\">InstantiationException</span>, <span class=\"pl-smi\">IllegalAccessException</span> {\n        <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">String</span>[]&gt; <span class=\"pl-s1\">parameterMap</span> = <span class=\"pl-s1\">request</span>.<span class=\"pl-en\">getParameterMap</span>();\n        <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-s1\">pMap</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">HashMap</span>&lt;&gt;();\n        <span class=\"pl-s1\">parameterMap</span>.<span class=\"pl-en\">forEach</span>((<span class=\"pl-s1\">k</span>, <span class=\"pl-s1\">v</span>) -&gt; <span class=\"pl-s1\">pMap</span>.<span class=\"pl-en\">put</span>(<span class=\"pl-s1\">k</span>, <span class=\"pl-smi\">List</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">v</span>)));\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">fields</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        <span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">superclass</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getSuperclass</span>();\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">superFields</span> = <span class=\"pl-c1\">null</span>;\n        <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-smi\">Object</span>.<span class=\"pl-k\">class</span>)) {\n            <span class=\"pl-s1\">superFields</span> = <span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        }\n        <span class=\"pl-c\">// \u53cd\u5c04\u5b9e\u4f8b\u5316\u53c2\u6570\u5bf9\u8c61        </span>\n        <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">instance</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getDeclaredConstructor</span>(<span class=\"pl-c1\">null</span>).<span class=\"pl-en\">newInstance</span>(<span class=\"pl-c1\">null</span>);\n        <span class=\"pl-c\">// \u586b\u5145\u5bf9\u8c61\u5b57\u6bb5\u4fe1\u606f        </span>\n        <span class=\"pl-en\">setFieldsForGet</span>(<span class=\"pl-s1\">fields</span>, <span class=\"pl-s1\">instance</span>, <span class=\"pl-s1\">parameterMap</span>, <span class=\"pl-s1\">pMap</span>);\n        <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">superFields</span> != <span class=\"pl-c1\">null</span>) {\n            <span class=\"pl-en\">setFieldsForGet</span>(<span class=\"pl-s1\">superFields</span>, <span class=\"pl-s1\">instance</span>, <span class=\"pl-s1\">parameterMap</span>, <span class=\"pl-s1\">pMap</span>);\n        }\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">instance</span>;\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * \u901a\u8fc7 field type \u6765\u8bbe\u7f6e\u5bf9\u5e94\u7684\u5b57\u6bb5\u503c</span>\n<span class=\"pl-c\">     * https://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">setFieldsForGet</span>(<span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">fields</span>, <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">instance</span>, <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">String</span>[]&gt; <span class=\"pl-s1\">parameterMap</span>, <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>,\n            <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-s1\">pMap</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">IllegalAccessException</span> {\n        <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">Field</span> <span class=\"pl-s1\">f</span> : <span class=\"pl-s1\">fields</span>) {\n            <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">setAccessible</span>(<span class=\"pl-c1\">true</span>);\n            <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">typeName</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getGenericType</span>().<span class=\"pl-en\">getTypeName</span>();\n            <span class=\"pl-smi\">ZhBindAlias</span> <span class=\"pl-s1\">bindAlias</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getAnnotation</span>(<span class=\"pl-smi\">ZhBindAlias</span>.<span class=\"pl-k\">class</span>);\n            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">nonNull</span>(<span class=\"pl-s1\">bindAlias</span>)) {\n                <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">name</span> = <span class=\"pl-s1\">bindAlias</span>.<span class=\"pl-en\">value</span>();\n                <span class=\"pl-smi\">int</span> <span class=\"pl-s1\">index</span> = <span class=\"pl-s1\">bindAlias</span>.<span class=\"pl-en\">index</span>();\n                <span class=\"pl-smi\">String</span>[] <span class=\"pl-s1\">values</span> = <span class=\"pl-s1\">parameterMap</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s1\">name</span>);\n                <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">values</span> != <span class=\"pl-c1\">null</span> &amp;&amp; <span class=\"pl-s1\">values</span>.<span class=\"pl-s1\">length</span> &gt; <span class=\"pl-c1\">0</span>) {\n                    <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">convertValue</span> = <span class=\"pl-smi\">FieldTypeConvertor</span>.<span class=\"pl-s1\">FieldType</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">typeName</span>).<span class=\"pl-en\">convert</span>(<span class=\"pl-s1\">values</span>, <span class=\"pl-s1\">index</span>);\n                    <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">instance</span>, <span class=\"pl-s1\">convertValue</span>);\n                }\n                <span class=\"pl-s1\">pMap</span>.<span class=\"pl-en\">remove</span>(<span class=\"pl-s1\">name</span>);\n                <span class=\"pl-k\">if</span> (<span class=\"pl-s\">\"extras\"</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>()) &amp;&amp; !<span class=\"pl-s1\">pMap</span>.<span class=\"pl-en\">isEmpty</span>()) {\n                    <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">instance</span>, <span class=\"pl-s1\">pMap</span>);\n                }\n            } <span class=\"pl-k\">else</span> {\n                <span class=\"pl-smi\">String</span>[] <span class=\"pl-s1\">values</span> = <span class=\"pl-s1\">parameterMap</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>());\n                <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">values</span> != <span class=\"pl-c1\">null</span> &amp;&amp; <span class=\"pl-s1\">values</span>.<span class=\"pl-s1\">length</span> &gt; <span class=\"pl-c1\">0</span>) {\n                    <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">convertValue</span> = <span class=\"pl-smi\">FieldTypeConvertor</span>.<span class=\"pl-s1\">FieldType</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">typeName</span>).<span class=\"pl-en\">convertFirst</span>(<span class=\"pl-s1\">values</span>);\n                    <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">instance</span>, <span class=\"pl-s1\">convertValue</span>);\n                }\n                <span class=\"pl-s1\">pMap</span>.<span class=\"pl-en\">remove</span>(<span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>());\n            }\n        }\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * POST \u65b9\u6cd5\u901a\u8fc7\u83b7\u53d6\u8bf7\u6c42\u4f53 json \u5b57\u7b26\u4e32\u8f6c\u8bf7\u6c42\u5bf9\u8c61\u7684\u65b9\u5f0f\u83b7\u53d6\u53c2\u6570\u4fe1\u606f</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Object</span> <span class=\"pl-en\">buildResultObjectForPost</span>(<span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">resultType</span>, <span class=\"pl-smi\">HttpServletRequest</span> <span class=\"pl-s1\">request</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">NoSuchMethodException</span>,\n            <span class=\"pl-smi\">InvocationTargetException</span>, <span class=\"pl-smi\">InstantiationException</span>, <span class=\"pl-smi\">IllegalAccessException</span>, <span class=\"pl-smi\">IOException</span> {\n        <span class=\"pl-c\">// \u9a8c\u8bc1 header \u7684 Content-Type \u4e3a application/json \u624d\u80fd\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c</span>\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">contentTypeHeader</span> = <span class=\"pl-s1\">request</span>.<span class=\"pl-en\">getHeader</span>(<span class=\"pl-smi\">HttpHeaders</span>.<span class=\"pl-c1\">CONTENT_TYPE</span>);\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isBlank</span>(<span class=\"pl-s1\">contentTypeHeader</span>) || !<span class=\"pl-s1\">contentTypeHeader</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-smi\">MediaType</span>.<span class=\"pl-c1\">APPLICATION_JSON_VALUE</span>)) {\n            <span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">IllegalStateException</span>(<span class=\"pl-s\">\"\u8bf7\u8bbe\u7f6e Content-Type \u503c\u4e3a application/json\"</span>);\n        }\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">fields</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        <span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">superclass</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getSuperclass</span>();\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">superFields</span> = <span class=\"pl-c1\">null</span>;\n        <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-smi\">Object</span>.<span class=\"pl-k\">class</span>)) {\n            <span class=\"pl-s1\">superFields</span> = <span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        }\n        <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">instance</span> = <span class=\"pl-s1\">resultType</span>.<span class=\"pl-en\">getDeclaredConstructor</span>(<span class=\"pl-c1\">null</span>).<span class=\"pl-en\">newInstance</span>(<span class=\"pl-c1\">null</span>);\n        <span class=\"pl-smi\">StringBuilder</span> <span class=\"pl-s1\">sb</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">StringBuilder</span>();\n        <span class=\"pl-k\">try</span> (<span class=\"pl-smi\">BufferedReader</span> <span class=\"pl-s1\">reader</span> = <span class=\"pl-s1\">request</span>.<span class=\"pl-en\">getReader</span>()) {\n            <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">line</span> = <span class=\"pl-s1\">reader</span>.<span class=\"pl-en\">readLine</span>();\n            <span class=\"pl-k\">while</span> (<span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isNotBlank</span>(<span class=\"pl-s1\">line</span>)) {\n                <span class=\"pl-s1\">sb</span>.<span class=\"pl-en\">append</span>(<span class=\"pl-s1\">line</span>);\n                <span class=\"pl-s1\">line</span> = <span class=\"pl-s1\">reader</span>.<span class=\"pl-en\">readLine</span>();\n            }\n            <span class=\"pl-s1\">log</span>.<span class=\"pl-en\">info</span>(<span class=\"pl-s\">\"uri:{},\u8bf7\u6c42\u4f53\u53c2\u6570:{}\"</span>, <span class=\"pl-s1\">request</span>.<span class=\"pl-en\">getRequestURI</span>(), <span class=\"pl-s1\">sb</span>);\n            <span class=\"pl-smi\">JSONObject</span> <span class=\"pl-s1\">body</span> = <span class=\"pl-smi\">JSON</span>.<span class=\"pl-en\">parseObject</span>(<span class=\"pl-s1\">sb</span>.<span class=\"pl-en\">toString</span>());\n            <span class=\"pl-en\">setFields</span>(<span class=\"pl-s1\">fields</span>, <span class=\"pl-s1\">body</span>, <span class=\"pl-s1\">instance</span>);\n            <span class=\"pl-en\">setFields</span>(<span class=\"pl-s1\">superFields</span>, <span class=\"pl-s1\">body</span>, <span class=\"pl-s1\">instance</span>);\n        }\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">instance</span>;\n    }\n\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">setFields</span>(<span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">fields</span>, <span class=\"pl-smi\">JSONObject</span> <span class=\"pl-s1\">source</span>, <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">target</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">IllegalAccessException</span> {\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">isNull</span>(<span class=\"pl-s1\">fields</span>) || <span class=\"pl-s1\">fields</span>.<span class=\"pl-s1\">length</span> == <span class=\"pl-c1\">0</span>) <span class=\"pl-k\">return</span>;\n        <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">Field</span> <span class=\"pl-s1\">f</span> : <span class=\"pl-s1\">fields</span>) {\n            <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">setAccessible</span>(<span class=\"pl-c1\">true</span>);\n            <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">fName</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>();\n            <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">typeName</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getGenericType</span>().<span class=\"pl-en\">getTypeName</span>();\n            <span class=\"pl-smi\">ZhBindAlias</span> <span class=\"pl-s1\">bindAlias</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getAnnotation</span>(<span class=\"pl-smi\">ZhBindAlias</span>.<span class=\"pl-k\">class</span>);\n            <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">nonNull</span>(<span class=\"pl-s1\">bindAlias</span>)) {\n                <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">name</span> = <span class=\"pl-s1\">bindAlias</span>.<span class=\"pl-en\">value</span>();\n                <span class=\"pl-smi\">int</span> <span class=\"pl-s1\">index</span> = <span class=\"pl-s1\">bindAlias</span>.<span class=\"pl-en\">index</span>();\n                <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">o</span> = <span class=\"pl-s1\">source</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s1\">name</span>);\n                <span class=\"pl-k\">if</span> (<span class=\"pl-s\">\"extras\"</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s1\">fName</span>)) {\n                    <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">target</span>, <span class=\"pl-en\">jsonObjectToMap</span>(<span class=\"pl-s1\">source</span>));\n                }\n                <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">isNull</span>(<span class=\"pl-s1\">o</span>)) <span class=\"pl-k\">continue</span>;\n                <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">convertValue</span> = <span class=\"pl-smi\">FieldTypeConvertor</span>.<span class=\"pl-s1\">FieldType</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">typeName</span>).<span class=\"pl-en\">convertJsonObject</span>(<span class=\"pl-s1\">o</span>, <span class=\"pl-s1\">index</span>, <span class=\"pl-s1\">name</span>);\n                <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">target</span>, <span class=\"pl-s1\">convertValue</span>);\n                <span class=\"pl-s1\">source</span>.<span class=\"pl-en\">remove</span>(<span class=\"pl-s1\">name</span>);\n            } <span class=\"pl-k\">else</span> {\n                <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">o</span> = <span class=\"pl-s1\">source</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-s1\">fName</span>);\n                <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">isNull</span>(<span class=\"pl-s1\">o</span>)) <span class=\"pl-k\">continue</span>;\n                <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">convertValue</span> = <span class=\"pl-smi\">FieldTypeConvertor</span>.<span class=\"pl-s1\">FieldType</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">typeName</span>).<span class=\"pl-en\">convertJsonObject</span>(<span class=\"pl-s1\">o</span>, <span class=\"pl-c1\">0</span>, <span class=\"pl-s1\">fName</span>);\n                <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">set</span>(<span class=\"pl-s1\">target</span>, <span class=\"pl-s1\">convertValue</span>);\n                <span class=\"pl-s1\">source</span>.<span class=\"pl-en\">remove</span>(<span class=\"pl-s1\">fName</span>);\n            }\n        }\n    }\n\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-en\">jsonObjectToMap</span>(<span class=\"pl-smi\">JSONObject</span> <span class=\"pl-s1\">object</span>) {\n        <span class=\"pl-smi\">TypeReference</span>&lt;<span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-s1\">type</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">TypeReference</span>&lt;&gt;(){};\n        <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-s1\">value</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">HashMap</span>&lt;&gt;();\n        <span class=\"pl-s1\">object</span>.<span class=\"pl-en\">forEach</span>((<span class=\"pl-s1\">k</span>, <span class=\"pl-s1\">v</span>) -&gt; {\n            <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt; <span class=\"pl-s1\">list</span> = <span class=\"pl-smi\">JSON</span>.<span class=\"pl-en\">parseObject</span>(<span class=\"pl-s1\">v</span>.<span class=\"pl-en\">toString</span>(), <span class=\"pl-s1\">type</span>);\n            <span class=\"pl-s1\">value</span>.<span class=\"pl-en\">put</span>(<span class=\"pl-s1\">k</span>, <span class=\"pl-s1\">list</span>);\n        });\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">value</span>;\n    }\n}</pre></div>\n<ul>\n<li>\u914d\u7f6e <strong>WebMvcConfigurer</strong> \u4f7f\u81ea\u5b9a\u4e49\u53c2\u6570\u89e3\u6790\u5668\u751f\u6548</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c1\">@</span><span class=\"pl-c1\">Configuration</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">WebConfig</span> <span class=\"pl-k\">implements</span> <span class=\"pl-smi\">WebMvcConfigurer</span> {\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Override</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">addArgumentResolvers</span>(<span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">HandlerMethodArgumentResolver</span>&gt; <span class=\"pl-s1\">resolvers</span>) {\n        <span class=\"pl-s1\">resolvers</span>.<span class=\"pl-en\">add</span>(<span class=\"pl-k\">new</span> <span class=\"pl-smi\">ZhFieldRequestResolver</span>());\n    }\n}</pre></div>\n<ul>\n<li>\u81ea\u5b9a\u4e49\u6ce8\u89e3\u7528\u4e8e\u6807\u6ce8\u89e3\u6790\u540e\u7684\u53c2\u6570\u63a5\u6536\u7c7b</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c\">/**</span>\n<span class=\"pl-c\"> * \u4e2d\u6587\u8bf7\u6c42\u53c2\u6570\u8f6c\u6362,\u8bf7\u6c42\u5b9e\u4f53\u5b57\u6bb5\u914d\u5408 {@link ZhBindAlias} \u4f7f\u7528</span>\n<span class=\"pl-c\"> * \u5b9e\u73b0\u539f\u7406\uff1a\u81ea\u5b9a\u4e49\u5b9e\u73b0 mvc \u53c2\u6570\u8f6c\u6362\u5668 {@link org.springframework.web.method.support.HandlerMethodArgumentResolver}</span>\n<span class=\"pl-c\"> */</span>\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Documented</span>\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Target</span>(<span class=\"pl-smi\">ElementType</span>.<span class=\"pl-c1\">PARAMETER</span>)\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Retention</span>(<span class=\"pl-smi\">RetentionPolicy</span>.<span class=\"pl-c1\">RUNTIME</span>)\n<span class=\"pl-k\">public</span> @interface <span class=\"pl-s1\">ZhBindConvertor</span> {\n\n    <span class=\"pl-smi\">boolean</span> <span class=\"pl-s1\">required</span>() <span class=\"pl-k\">default</span> <span class=\"pl-c1\">true</span>;\n}\n\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Target</span>(<span class=\"pl-smi\">ElementType</span>.<span class=\"pl-c1\">FIELD</span>)\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Retention</span>(<span class=\"pl-smi\">RetentionPolicy</span>.<span class=\"pl-c1\">RUNTIME</span>)\n<span class=\"pl-k\">public</span> @interface <span class=\"pl-s1\">ZhBindAlias</span> {\n    <span class=\"pl-c\">/** \u5b57\u6bb5\u7684\u4e2d\u6587\u522b\u540d */</span>\n    <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">value</span>();\n\n    <span class=\"pl-c\">/** \u540c\u540d\u7684\u60c5\u51b5\u4e0b\u7ed1\u5b9a\u5230\u7b2c\u51e0\u4e2a\u53c2\u6570 */</span>\n    <span class=\"pl-smi\">int</span> <span class=\"pl-s1\">index</span>() <span class=\"pl-k\">default</span> <span class=\"pl-c1\">0</span>;\n\n    <span class=\"pl-c\">/** \u662f\u5426\u9ed8\u8ba4\u6dfb\u52a0\u5230 query \u6761\u4ef6\u6784\u5efa\u4e2d */</span>\n    <span class=\"pl-smi\">boolean</span> <span class=\"pl-s1\">includeQuery</span>() <span class=\"pl-k\">default</span> <span class=\"pl-c1\">true</span>;\n}</pre></div>\n<ul>\n<li>\u62bd\u53d6\u516c\u7528\u67e5\u8be2\u53c2\u6570\u7c7b</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c\">/**</span>\n<span class=\"pl-c\"> * \u516c\u5171\u67e5\u8be2\u53c2\u6570</span>\n<span class=\"pl-c\"> */</span>\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Data</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">abstract</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">ZhSearchReq</span> {\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s\">\"\u5f55\u5165\u65f6\u95f4\"</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">startTime</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s1\">value</span> = <span class=\"pl-s\">\"\u5f55\u5165\u65f6\u95f4\"</span>, <span class=\"pl-s1\">index</span> = <span class=\"pl-c1\">1</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">endTime</span>;\n\n    <span class=\"pl-c\">/** \u81ea\u5b9a\u4e49\u67e5\u8be2\u5b57\u6bb5(\u5bf9\u5e94\u53d8\u5316\u7684\u90e8\u5206) */</span>\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s1\">value</span> = <span class=\"pl-s\">\"extra\"</span>, <span class=\"pl-s1\">includeQuery</span> = <span class=\"pl-c1\">false</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Map</span>&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;&gt; <span class=\"pl-s1\">extras</span>;\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * \u6392\u5e8f\u5b57\u6bb5, json \u5b57\u7b26\u4e32\uff0c\u793a\u4f8b\uff1a</span>\n<span class=\"pl-c\">     * {\u201c\u5f55\u5165\u65f6\u95f4\u201d: \"ascend\", \"\u5206\u914d\u65f6\u95f4\": \"descend\"}</span>\n<span class=\"pl-c\">     * \u6309\u5f55\u5165\u65f6\u95f4\u5347\u5e8f\uff0c\u5206\u914d\u65f6\u95f4\u964d\u5e8f\u6392\u5217\uff0c\u9ed8\u8ba4\u5347\u5e8f</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">sorter</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Min</span>(<span class=\"pl-c1\">1</span>)\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s1\">value</span> = <span class=\"pl-s\">\"current\"</span>, <span class=\"pl-s1\">includeQuery</span> = <span class=\"pl-c1\">false</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Integer</span> <span class=\"pl-s1\">current</span> = <span class=\"pl-c1\">1</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Min</span>(<span class=\"pl-c1\">1</span>)\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s1\">value</span> = <span class=\"pl-s\">\"pageSize\"</span>, <span class=\"pl-s1\">includeQuery</span> = <span class=\"pl-c1\">false</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Integer</span> <span class=\"pl-s1\">pageSize</span> = <span class=\"pl-c1\">50</span>;\n\n    <span class=\"pl-c\">/** \u9ed8\u8ba4\u6309\u5f55\u5165\u65f6\u95f4\u964d\u5e8f\u6392\u5217 */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">Sort</span> <span class=\"pl-en\">defaultSort</span>() {\n        <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Sort</span>.<span class=\"pl-en\">by</span>(<span class=\"pl-s\">\"\u5f55\u5165\u65f6\u95f4\"</span>).<span class=\"pl-en\">descending</span>();\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * \u83b7\u53d6\u5b50\u7c7b\u5b57\u6bb5\u7684\u503c,\u5b50\u7c7b\u9700\u8981\u6709 getter \u65b9\u6cd5</span>\n<span class=\"pl-c\">     * @deprecated</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">filedCriteriaForSubClass</span>(<span class=\"pl-smi\">Criteria</span> <span class=\"pl-s1\">criteria</span>, <span class=\"pl-smi\">Field</span> <span class=\"pl-s1\">f</span>) {\n        <span class=\"pl-smi\">Method</span>[] <span class=\"pl-s1\">methods</span> = <span class=\"pl-smi\">this</span>.<span class=\"pl-en\">getClass</span>().<span class=\"pl-en\">getDeclaredMethods</span>();\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">name</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>();\n        <span class=\"pl-smi\">Stream</span>.<span class=\"pl-en\">of</span>(<span class=\"pl-s1\">methods</span>)\n                .<span class=\"pl-en\">filter</span>(<span class=\"pl-s1\">m</span> -&gt; <span class=\"pl-s1\">m</span>.<span class=\"pl-en\">getName</span>().<span class=\"pl-en\">startsWith</span>(<span class=\"pl-s\">\"get\"</span>) &amp;&amp; <span class=\"pl-s1\">m</span>.<span class=\"pl-en\">getName</span>().<span class=\"pl-en\">toLowerCase</span>().<span class=\"pl-en\">contains</span>(<span class=\"pl-s1\">name</span>.<span class=\"pl-en\">toLowerCase</span>()))\n                .<span class=\"pl-en\">findAny</span>()\n                .<span class=\"pl-en\">ifPresent</span>(<span class=\"pl-s1\">m</span> -&gt; {\n                    <span class=\"pl-k\">try</span> {\n                        <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">value</span> = <span class=\"pl-s1\">m</span>.<span class=\"pl-en\">invoke</span>(<span class=\"pl-smi\">this</span>, <span class=\"pl-c1\">null</span>);\n                        <span class=\"pl-c\">// filedCriteria(criteria, f, value);</span>\n                    } <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">IllegalAccessException</span> <span class=\"pl-s1\">e</span>) {\n                        <span class=\"pl-s1\">e</span>.<span class=\"pl-en\">printStackTrace</span>();\n                    } <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">InvocationTargetException</span> <span class=\"pl-s1\">e</span>) {\n                        <span class=\"pl-s1\">e</span>.<span class=\"pl-en\">printStackTrace</span>();\n                    }\n                });\n    }\n\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">Sort</span> <span class=\"pl-en\">sort</span>() {\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">sorter</span> = <span class=\"pl-en\">getSorter</span>();\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isEmpty</span>(<span class=\"pl-s1\">sorter</span>)) <span class=\"pl-k\">return</span> <span class=\"pl-en\">defaultSort</span>();\n        <span class=\"pl-smi\">HashMap</span> <span class=\"pl-s1\">sorterMap</span> = <span class=\"pl-smi\">JSONObject</span>.<span class=\"pl-en\">parseObject</span>(<span class=\"pl-s1\">sorter</span>, <span class=\"pl-smi\">HashMap</span>.<span class=\"pl-k\">class</span>);\n        <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">sorterMap</span>.<span class=\"pl-en\">isEmpty</span>()) <span class=\"pl-k\">return</span> <span class=\"pl-en\">defaultSort</span>();\n        <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">Sort</span>.<span class=\"pl-smi\">Order</span>&gt; <span class=\"pl-s1\">orders</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ArrayList</span>&lt;&gt;(<span class=\"pl-s1\">sorterMap</span>.<span class=\"pl-en\">size</span>());\n        <span class=\"pl-s1\">sorterMap</span>.<span class=\"pl-en\">forEach</span>((<span class=\"pl-s1\">k</span>, <span class=\"pl-s1\">v</span>) -&gt; {\n            <span class=\"pl-smi\">Sort</span>.<span class=\"pl-smi\">Order</span> <span class=\"pl-s1\">order</span>;\n            <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">v</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s\">\"descend\"</span>)) {\n                <span class=\"pl-s1\">order</span> = <span class=\"pl-smi\">Sort</span>.<span class=\"pl-s1\">Order</span>.<span class=\"pl-en\">desc</span>(<span class=\"pl-s1\">k</span>.<span class=\"pl-en\">toString</span>());\n            } <span class=\"pl-k\">else</span> {\n                <span class=\"pl-s1\">order</span> = <span class=\"pl-smi\">Sort</span>.<span class=\"pl-s1\">Order</span>.<span class=\"pl-en\">asc</span>(<span class=\"pl-s1\">k</span>.<span class=\"pl-en\">toString</span>());\n            }\n            <span class=\"pl-s1\">orders</span>.<span class=\"pl-en\">add</span>(<span class=\"pl-s1\">order</span>);\n        });\n        <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">orders</span>.<span class=\"pl-en\">isEmpty</span>()) <span class=\"pl-k\">return</span> <span class=\"pl-en\">defaultSort</span>();\n        <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Sort</span>.<span class=\"pl-en\">by</span>(<span class=\"pl-s1\">orders</span>);\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * \u7531\u4e8e\u6570\u636e\u5e93\u9009\u578b\u539f\u56e0\uff0c\u4e0e MongoDB \u67e5\u8be2\u6761\u4ef6\u5f3a\u7ed1\u5b9a</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-smi\">Criteria</span> <span class=\"pl-en\">getQueryCriteria</span>() {\n        <span class=\"pl-smi\">Criteria</span> <span class=\"pl-s1\">criteria</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Criteria</span>();\n        <span class=\"pl-smi\">Class</span>&lt;? <span class=\"pl-k\">extends</span> <span class=\"pl-smi\">ZhSearchReq</span>&gt; <span class=\"pl-s1\">reqClass</span> = <span class=\"pl-smi\">this</span>.<span class=\"pl-en\">getClass</span>();\n        <span class=\"pl-smi\">Class</span>&lt;?&gt; <span class=\"pl-s1\">superclass</span> = <span class=\"pl-s1\">reqClass</span>.<span class=\"pl-en\">getSuperclass</span>();\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">superFields</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">Field</span>[<span class=\"pl-c1\">0</span>];\n        <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-smi\">Object</span>.<span class=\"pl-k\">class</span>)) {\n            <span class=\"pl-s1\">superFields</span> = <span class=\"pl-s1\">superclass</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        }\n        <span class=\"pl-smi\">Field</span>[] <span class=\"pl-s1\">fields</span> = <span class=\"pl-s1\">reqClass</span>.<span class=\"pl-en\">getDeclaredFields</span>();\n        <span class=\"pl-smi\">Arrays</span>.<span class=\"pl-en\">stream</span>(<span class=\"pl-s1\">fields</span>).<span class=\"pl-en\">forEach</span>(<span class=\"pl-s1\">f</span> -&gt; <span class=\"pl-en\">filedCriteria</span>(<span class=\"pl-s1\">criteria</span>, <span class=\"pl-s1\">f</span>));\n        <span class=\"pl-smi\">Arrays</span>.<span class=\"pl-en\">stream</span>(<span class=\"pl-s1\">superFields</span>).<span class=\"pl-en\">forEach</span>(<span class=\"pl-s1\">f</span> -&gt; <span class=\"pl-en\">filedCriteria</span>(<span class=\"pl-s1\">criteria</span>, <span class=\"pl-s1\">f</span>));\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isNotBlank</span>(<span class=\"pl-en\">getStartTime</span>()) &amp;&amp; <span class=\"pl-smi\">StringUtils</span>.<span class=\"pl-en\">isNotBlank</span>(<span class=\"pl-en\">getEndTime</span>())) {\n            <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s\">\"\u5f55\u5165\u65f6\u95f4\"</span>).<span class=\"pl-en\">gte</span>(<span class=\"pl-en\">getStartTime</span>()).<span class=\"pl-en\">lte</span>(<span class=\"pl-en\">getEndTime</span>());\n        }\n        <span class=\"pl-c\">// \u5bf9\u4e8e\u52a8\u6001\u53c2\u6570\u7684\u5904\u7406</span>\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">MapUtil</span>.<span class=\"pl-en\">isNotEmpty</span>(<span class=\"pl-s1\">extras</span>)) {\n            <span class=\"pl-s1\">extras</span>.<span class=\"pl-en\">forEach</span>((<span class=\"pl-s1\">k</span>, <span class=\"pl-s1\">v</span>) -&gt; {\n                <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">CollUtil</span>.<span class=\"pl-en\">isNotEmpty</span>(<span class=\"pl-s1\">v</span>)) {\n                    <span class=\"pl-c\">// warning \u4e0e\u5177\u4f53\u4e1a\u52a1\u903b\u8f91\u76f8\u5173,\u53ef\u4ee5\u524d\u7aef\u786e\u5b9a\u516c\u7528\u7684\u5904\u7406\u6a21\u578b</span>\n                    <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">v</span>.<span class=\"pl-en\">contains</span>(<span class=\"pl-s\">\"\u5168\u9009\"</span>)) {\n                        <span class=\"pl-k\">if</span> (<span class=\"pl-s1\">v</span>.<span class=\"pl-en\">size</span>() == <span class=\"pl-c1\">1</span>) {\n                            <span class=\"pl-c\">// \u6839\u636e\u4e1a\u52a1\u903b\u8f91\u786e\u5b9a\u5355\u503c\u7684\u67e5\u8be2\u5b9a\u4e49</span>\n                            <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s1\">k</span>).<span class=\"pl-en\">is</span>(<span class=\"pl-s1\">v</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-c1\">0</span>));\n                        } <span class=\"pl-k\">else</span> {\n                            <span class=\"pl-c\">// \u6839\u636e\u4e1a\u52a1\u903b\u8f91\u786e\u5b9a\u591a\u503c\u7684\u67e5\u8be2\u5b9a\u4e49</span>\n                            <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s1\">k</span>).<span class=\"pl-en\">in</span>(<span class=\"pl-s1\">v</span>);\n                        }\n                    }\n                }\n            });\n        }\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">criteria</span>;\n    }\n\n    <span class=\"pl-c\">/**</span>\n<span class=\"pl-c\">     * \u5bf9\u4e8e\u5355\u4e2a\u67e5\u8be2\u53c2\u6570\u7684\u5904\u7406</span>\n<span class=\"pl-c\">     */</span>\n    <span class=\"pl-k\">protected</span> <span class=\"pl-smi\">void</span> <span class=\"pl-en\">filedCriteria</span>(<span class=\"pl-smi\">Criteria</span> <span class=\"pl-s1\">criteria</span>, <span class=\"pl-smi\">Field</span> <span class=\"pl-s1\">f</span>) {\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">fName</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getName</span>();\n        <span class=\"pl-k\">if</span> (<span class=\"pl-s\">\"sorter\"</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s1\">fName</span>)) <span class=\"pl-k\">return</span>;\n        <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">typeName</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getGenericType</span>().<span class=\"pl-en\">getTypeName</span>();\n        <span class=\"pl-smi\">ZhBindAlias</span> <span class=\"pl-s1\">alias</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">getAnnotation</span>(<span class=\"pl-smi\">ZhBindAlias</span>.<span class=\"pl-k\">class</span>);\n        <span class=\"pl-smi\">Object</span> <span class=\"pl-s1\">value</span> = <span class=\"pl-c1\">null</span>;\n        <span class=\"pl-k\">try</span> {\n            <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">setAccessible</span>(<span class=\"pl-c1\">true</span>);\n            <span class=\"pl-s1\">value</span> = <span class=\"pl-s1\">f</span>.<span class=\"pl-en\">get</span>(<span class=\"pl-smi\">this</span>);\n        } <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">IllegalAccessException</span> <span class=\"pl-s1\">e</span>) {\n            <span class=\"pl-c\">// \u5185\u90e8\u8c03\u7528\uff0c\u4e0d\u4f1a\u6709\u95ee\u9898</span>\n            <span class=\"pl-s1\">e</span>.<span class=\"pl-en\">printStackTrace</span>();\n        }\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">isNull</span>(<span class=\"pl-s1\">value</span>)) <span class=\"pl-k\">return</span>;\n        <span class=\"pl-k\">if</span> (<span class=\"pl-smi\">Objects</span>.<span class=\"pl-en\">nonNull</span>(<span class=\"pl-s1\">alias</span>)) {\n            <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">alias</span>.<span class=\"pl-en\">includeQuery</span>()) <span class=\"pl-k\">return</span>;\n            <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">where</span> = <span class=\"pl-s1\">alias</span>.<span class=\"pl-en\">value</span>();\n            <span class=\"pl-k\">if</span> (<span class=\"pl-s\">\"java.lang.String\"</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s1\">typeName</span>) &amp;&amp; !<span class=\"pl-s1\">where</span>.<span class=\"pl-en\">contains</span>(<span class=\"pl-s\">\"\u65f6\u95f4\"</span>)) {\n                <span class=\"pl-c\">// \u5355\u503c\u91c7\u7528\u524d\u7f00\u5339\u914d\u67e5\u8be2</span>\n                <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s1\">where</span>).<span class=\"pl-en\">regex</span>(<span class=\"pl-s\">\"^\"</span> + <span class=\"pl-s1\">value</span>);\n            } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-s\">\"java.util.List&lt;java.lang.String&gt;\"</span>.<span class=\"pl-en\">equals</span>(<span class=\"pl-s1\">typeName</span>) &amp;&amp; !<span class=\"pl-s1\">where</span>.<span class=\"pl-en\">contains</span>(<span class=\"pl-s\">\"\u65f6\u95f4\"</span>)) {\n                <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt; <span class=\"pl-s1\">values</span> = (<span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt;) <span class=\"pl-s1\">value</span>;\n                <span class=\"pl-k\">if</span> (!<span class=\"pl-s1\">values</span>.<span class=\"pl-en\">contains</span>(<span class=\"pl-s\">\"\u5168\u9009\"</span>)) {\n                    <span class=\"pl-c\">// \u591a\u503c\u91c7\u7528 $in \u67e5\u8be2</span>\n                    <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s1\">where</span>).<span class=\"pl-en\">in</span>(<span class=\"pl-s1\">values</span>);\n                }\n            }\n        } <span class=\"pl-k\">else</span> {\n            <span class=\"pl-c\">// \u7b49\u503c\u67e5\u8be2</span>\n            <span class=\"pl-s1\">criteria</span>.<span class=\"pl-en\">and</span>(<span class=\"pl-s1\">fName</span>).<span class=\"pl-en\">is</span>(<span class=\"pl-s1\">value</span>);\n        }\n    }\n}</pre></div>\n<ul>\n<li>\u6269\u5c55\u67e5\u8be2\u53c2\u6570\u7c7b</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c1\">@</span><span class=\"pl-c1\">Data</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">CustomerSearchReq</span> <span class=\"pl-k\">extends</span> <span class=\"pl-smi\">ZhSearchReq</span> {\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s\">\"\u8ddf\u8fdb\u72b6\u6001\"</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">List</span>&lt;<span class=\"pl-smi\">String</span>&gt; <span class=\"pl-s1\">followState</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s\">\"\u624b\u673a\u53f7\"</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">mobile</span>;\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindAlias</span>(<span class=\"pl-s\">\"\u59d3\u540d\"</span>)\n    <span class=\"pl-k\">private</span> <span class=\"pl-smi\">String</span> <span class=\"pl-s1\">name</span>;\n}</pre></div>\n<ul>\n<li>\u4f7f\u7528</li>\n</ul>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c1\">@</span><span class=\"pl-c1\">GetMapping</span>()\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Operation</span>(<span class=\"pl-s1\">summary</span> = <span class=\"pl-s\">\"\u7ebf\u7d22\u5217\u8868\"</span>)\n<span class=\"pl-k\">public</span> <span class=\"pl-smi\">R</span>&lt;<span class=\"pl-smi\">PageResult</span>&lt;<span class=\"pl-smi\">LinkedHashMap</span>&gt;&gt; <span class=\"pl-s1\">searchPage</span>(<span class=\"pl-c1\">@</span><span class=\"pl-c1\">ZhBindConvertor</span> <span class=\"pl-smi\">CustomerSearchReq</span> <span class=\"pl-s1\">searchReq</span>) {\n    <span class=\"pl-k\">return</span> <span class=\"pl-smi\">R</span>.<span class=\"pl-en\">ok</span>(<span class=\"pl-s1\">customerSearchService</span>.<span class=\"pl-en\">search</span>(<span class=\"pl-s1\">searchReq</span>));\n}</pre></div>\n<ul>\n<li>\u91cd\u6784\u8d28\u91cf\u4fdd\u8bc1-\u6d4b\u8bd5\u7528\u4f8b\n<ul>\n<li>\u53ea\u5199\u4e86\u96c6\u6210\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4fdd\u8bc1\u57fa\u672c\u7684\u5168\u6d41\u7a0b\u51c6\u786e\u6027</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"user-content-\u603b\u7ed3\"><a class=\"heading-link\" href=\"#\u603b\u7ed3\">\u603b\u7ed3<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h2>\n<h3 id=\"user-content-\u6d89\u53ca\u77e5\u8bc6\u70b9\"><a class=\"heading-link\" href=\"#\u6d89\u53ca\u77e5\u8bc6\u70b9\">\u6d89\u53ca\u77e5\u8bc6\u70b9<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h3>\n<ul>\n<li>Spring\n<ul>\n<li>SpringMVC \u53c2\u6570\u7ed1\u5b9a\u6d41\u7a0b\u53ca\u81ea\u5b9a\u4e49\u53c2\u6570\u89e3\u6790\u5668\u5b9e\u73b0\n<ul>\n<li>GET \u7c7b\u578b\u8bf7\u6c42\u53c2\u6570\u89e3\u6790</li>\n<li>POST \u7c7b\u578b\u8bf7\u6c42\u53c2\u6570\u89e3\u6790</li>\n</ul>\n</li>\n<li>\u81ea\u5b9a\u4e49\u53c2\u6570\u89e3\u6790\u5668\u5982\u4f55\u914d\u7f6e\u751f\u6548</li>\n</ul>\n</li>\n<li>\u53cd\u5c04:\n<ul>\n<li>\u6839\u636e\u7c7b\u578b\u5b9e\u4f8b\u5316\u5bf9\u8c61</li>\n<li>\u5b57\u6bb5\u4fe1\u606f\u83b7\u53d6\u4e0e\u5bf9\u8c61\u5b57\u6bb5\u8bbe\u7f6e</li>\n<li>\u5b57\u6bb5\u7c7b\u578b\u4fe1\u606f\u83b7\u53d6\u548c\u533a\u5206\u5404\u79cd\u4e0d\u540c\u7c7b\u578b</li>\n<li>\u7236\u7c7b\u5b57\u6bb5\u4fe1\u606f\u83b7\u53d6\u4ee5\u53ca\u5b50\u7c7b\u5b57\u6bb5\u4fe1\u606f\u5982\u4f55\u83b7\u53d6</li>\n<li>\u5bf9\u8c61\u793a\u4f8b\u65b9\u6cd5\u4fe1\u606f\u83b7\u53d6\u548c\u65b9\u6cd5\u6267\u884c</li>\n</ul>\n</li>\n<li>\u81ea\u5b9a\u4e49\u6ce8\u89e3\u7684\u4f7f\u7528</li>\n<li>\u6d4b\u8bd5\u7528\u4f8b\n<ul>\n<li>\u4f7f\u7528\u4e86 testcontainers + docker mongodb + mockmvc \u7f16\u5199\u96c6\u6210\u6d4b\u8bd5\u7528\u4f8b</li>\n<li>json \u6587\u4ef6 + MongoTemplate#insert \u5b8c\u6210\u6d4b\u8bd5\u524d\u6570\u636e\u51c6\u5907</li>\n<li>MongoTemplate#dropCollection \u5b8c\u6210\u6d4b\u8bd5\u540e\u6570\u636e\u6e05\u7406</li>\n<li>MockMvc \u5bf9\u4e8e\u54cd\u5e94\u6570\u636e\u7684\u5404\u79cd\u51c6\u786e\u6027\u65ad\u8a00</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"user-content-\u9047\u5230\u7684\u95ee\u9898\"><a class=\"heading-link\" href=\"#\u9047\u5230\u7684\u95ee\u9898\">\u9047\u5230\u7684\u95ee\u9898<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h3>\n<ul>\n<li>\n<p>\u7236\u7c7b\u65b9\u6cd5\u53cd\u5c04\u83b7\u53d6\u5b50\u7c7b\u5b57\u6bb5\u7684\u53d6\u503c(\u5b50\u7c7b\u5b9e\u4f8b\u8c03\u7528\u65f6)</p>\n<ul>\n<li>\u89e3\u51b3\uff1a\u5fd8\u8bb0\u4e86 <strong>f.setAccessible(true)</strong>;</li>\n<li>\u6ca1\u6709 f.setAccessible(true) \u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8c03\u7528\u53cd\u5c04\u65b9\u6cd5 getter + field name \u7684\u65b9\u5f0f\u83b7\u53d6\u503c\uff0c\u4f46\u5f88\u4e0d clean \u4e5f\u4f1a\u6709\u66f4\u5927\u6027\u80fd\u5f00\u9500\uff1f<a href=\"https://github.com/Xuguozong/custom_mvc_method_argument_resolver/blob/main/src/test/java/com/example/benchmark/ReflectFieldGetVSGetterMethodInvoke.java\">benchmark</a>\n</li>\n</ul>\n</li>\n<li>\n<p>spring doc openapi \u53c2\u6570\u8f6c\u6362\u5668\u95ee\u9898</p>\n<ul>\n<li>\u901a\u8fc7 WebMvcConfigurer#addArgumentResolvers \u89e3\u51b3</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"user-content-\u5b58\u5728\u7684\u95ee\u9898\u53ca\u53ef\u4ee5\u7ee7\u7eed\u6539\u8fdb\u7684\u5730\u65b9\"><a class=\"heading-link\" href=\"#\u5b58\u5728\u7684\u95ee\u9898\u53ca\u53ef\u4ee5\u7ee7\u7eed\u6539\u8fdb\u7684\u5730\u65b9\">\u5b58\u5728\u7684\u95ee\u9898\u53ca\u53ef\u4ee5\u7ee7\u7eed\u6539\u8fdb\u7684\u5730\u65b9<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h3>\n<ul>\n<li>\u516c\u7528\u67e5\u8be2\u53c2\u6570\u7c7b\u53ea\u652f\u6301\u4e00\u5c42\u7ee7\u627f\u4f53\u7cfb\u7c7b\u7684\u5904\u7406\uff0c\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u5b9e\u9645\u9700\u8981\u505a\u652f\u6301\u5904\u7406\u6216\u505a\u89c4\u8303</li>\n<li>\u516c\u7528\u67e5\u8be2\u53c2\u6570\u7c7b\u83b7\u53d6 query \u6761\u4ef6\u7684\u65b9\u6cd5\u4e0e\u6570\u636e\u5e93\u7c7b\u578b\u4ee5\u53ca\u4e1a\u52a1\u5f3a\u7ed1\u5b9a\uff0c\u53ef\u4ee5\u5728\u8fd9\u4e00\u5c42\u6839\u636e\u5b9e\u9645\u9700\u6c42\u518d\u505a\u4e00\u5c42\u62bd\u8c61</li>\n<li>\u7531\u4e8e\u4e1a\u52a1\u903b\u8f91\u7b80\u5355\uff0c\u6ca1\u6709\u505a\u5355\u5143\u6d4b\u8bd5\uff0c\u53ea\u505a\u4e86\u96c6\u6210\u6d4b\u8bd5</li>\n<li>\u53cd\u5c04\u83b7\u53d6\u5b57\u6bb5\u4fe1\u606f\u65f6\u6ca1\u6709\u505a\u7f13\u5b58\uff0c\u53ef\u4ee5 <a href=\"https://github.com/Xuguozong/custom_mvc_method_argument_resolver/blob/main/src/test/java/com/example/benchmark/ReflectGetFieldsUsingCacheOrNot.java\">benchmark</a> \u4e0b\u770b\u770b\u5bf9\u4e8e\u5e94\u7528\u7684\u6027\u80fd\u63d0\u5347</li>\n</ul>\n<h2 id=\"user-content-\u53c2\u8003\u53ca\u793a\u4f8b\u4ee3\u7801\"><a class=\"heading-link\" href=\"#\u53c2\u8003\u53ca\u793a\u4f8b\u4ee3\u7801\">\u53c2\u8003\u53ca\u793a\u4f8b\u4ee3\u7801<span aria-hidden=\"true\" class=\"octicon octicon-link\"></span></a></h2>\n<p>\u4ee3\u7801\uff1a</p>\n<p><a href=\"https://github.com/Xuguozong/custom_mvc_method_argument_resolver\">custom_mvc_method_argument_resolver</a></p>\n<p>\u53c2\u8003\uff1a</p>\n<p><a href=\"https://www.petrikainulainen.net/programming/spring-framework/spring-from-the-trenches-creating-a-custom-handlermethodargumentresolver/\" rel=\"nofollow\">Spring From the Trenches: Creating a Custom HandlerMethodArgumentResolver</a></p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-methods\" rel=\"nofollow\">mvc-ann-methods</a></p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html\" rel=\"nofollow\">oracle-reflect-fieldTypes</a></p>\n\n", "title": "\u6551\u6551\u7d22\u5c14", "homeUrl": "https://blog.0study.fun", "postSourceUrl": "https://github.com/saveole/saveole.github.io/issues/1", "faviconUrl": "http://meekdai.com/favicon.ico", "filingNum": "\u7696ICP\u59072023020147\u53f7", "startSite": "10/23/2023", "i18n": "CN", "commentNum": 0, "repoName": "saveole/saveole.github.io", "GMEEK_VERSION": "v1.2"}</script>
<body>
<div class="markdown-body">
    <h1>
        <div id="postTitle"></div>
        <div class="title-right">
        <button id="buttonHome" class="btn btn-invisible circle" onclick="window.location.href='/'"><svg class="octicon octicon-sun" width="16" height="16"><path id="pathHome" fill-rule="evenodd"></path></svg></button>
        
        <button class="btn btn-invisible circle" onclick="gotoSource()" title="Issue"><svg class="octicon octicon-sun" width="16" height="16"><path id="pathIssue" fill-rule="evenodd"></path></svg></button>
        
        <button id="changeTheme" class="btn btn-invisible circle" onclick="modeSwitch()"><svg class="octicon octicon-sun" width="16" height="16"><path id="themeSwitch" fill-rule="evenodd"></path></svg></button>
        </div>
    </h1>
    <div id="postBody"></div>

    <button class="btn btn-block" type="button" onclick="openComments()" id="cmButton"> </button>
    <div class="comments" id="comments"></div>

    <div class="footer">Copyright  <span id="year"></span> <a id="footerblogTitle" href=""></a> <p><span id="filingNum"></span><span id="runday"></span>Powered by <a href="https://github.com/Meekdai/Gmeek" target="_blank">Gmeek</a></p></div>
</div>
</body>

<script>
function addScript(url){
    var script = document.createElement('script');
    script.setAttribute('type','text/javascript');
    script.setAttribute('src',url);
    document.body.appendChild(script);
}
window.onload=function(){
    addScript("https://cdn.jsdelivr.net/gh/Meekdai/Gmeek@"+blogBase["GMEEK_VERSION"]+"/icon.js" );
    addScript("https://cdn.jsdelivr.net/gh/Meekdai/Gmeek@"+blogBase["GMEEK_VERSION"]+"/Gmeek.js" );
}
</script>

</html>
