[
  
  {
    "title": "2025E",
    "url": "/posts/end-of-2025/",
    "categories": "æ€»ç»“",
    "tags": "å¹´ç»ˆæ€»ç»“, ç”Ÿæ´», è¿åŠ¨, Code",
    "date": "2025-12-31 08:59:59 +0800",
    





    
    "snippet": "ç”Ÿæ´»  ä»Šå¹´çš„ 5 æœˆ 10 å·ä¸Šåˆï¼Œæˆ‘å½“ä¸Šäº†çˆ¸çˆ¸ï¼Œå°å®å¯çˆ±æäº†ï¼Œæˆä¸ºçˆ¸çˆ¸çš„æ„Ÿè§‰æ˜¯å¾ˆå¥‡å¦™çš„ï¼Œä»æ­¤åˆå¤šäº†ä¸ªç‰µæŒ‚çš„äººã€‚æˆ‘ç»™ä»–å–‚äº†ç¬¬ä¸€å£å¥¶ç²‰ï¼Œç»™ä»–æ¢äº†ç¬¬ä¸€ä¸ªçº¸å°¿è£¤ï¼Œçœ‹ç€ä»–é•¿äº†ç¬¬ä¸€é¢—ç‰™ï¼Œå¬äº†ä»–å–Šå¦ˆå¦ˆï¼Œçœ‹ç€ä»–ç¬¬ä¸€æ¬¡æ„Ÿå†’ï¼Œå–‰å’™æ²™å“‘ï¼Œä½é™¢è¾“æ¶²ã€‚ç”Ÿå‘½æ˜¯å¦‚æ­¤ç¾å¥½ï¼Œå¸Œæœ›æˆ‘ä»¥åèƒ½ä½œä¸ºçˆ¸çˆ¸å’Œæœ‹å‹ï¼Œå¸¸ä¼´å­©å­è¾¹ï¼Œå’Œä»–ä¸€èµ·äº«å—æˆé•¿çš„é…¸ç”œè‹¦è¾£ã€‚  æ–°æˆ¿ä»Šå¹´äº¤ä»˜ï¼Œ5 æœˆä»½å¼€å§‹äº†è£…ä¿®ã€‚æˆ‘ä»¬é€‰æ‹©çš„æ˜¯åŠåŒ…ï¼Œ480/å¹³ çš„ä»·æ ¼ï¼ŒåŒ…æ‹¬...",
    "content": "ç”Ÿæ´»  ä»Šå¹´çš„ 5 æœˆ 10 å·ä¸Šåˆï¼Œæˆ‘å½“ä¸Šäº†çˆ¸çˆ¸ï¼Œå°å®å¯çˆ±æäº†ï¼Œæˆä¸ºçˆ¸çˆ¸çš„æ„Ÿè§‰æ˜¯å¾ˆå¥‡å¦™çš„ï¼Œä»æ­¤åˆå¤šäº†ä¸ªç‰µæŒ‚çš„äººã€‚æˆ‘ç»™ä»–å–‚äº†ç¬¬ä¸€å£å¥¶ç²‰ï¼Œç»™ä»–æ¢äº†ç¬¬ä¸€ä¸ªçº¸å°¿è£¤ï¼Œçœ‹ç€ä»–é•¿äº†ç¬¬ä¸€é¢—ç‰™ï¼Œå¬äº†ä»–å–Šå¦ˆå¦ˆï¼Œçœ‹ç€ä»–ç¬¬ä¸€æ¬¡æ„Ÿå†’ï¼Œå–‰å’™æ²™å“‘ï¼Œä½é™¢è¾“æ¶²ã€‚ç”Ÿå‘½æ˜¯å¦‚æ­¤ç¾å¥½ï¼Œå¸Œæœ›æˆ‘ä»¥åèƒ½ä½œä¸ºçˆ¸çˆ¸å’Œæœ‹å‹ï¼Œå¸¸ä¼´å­©å­è¾¹ï¼Œå’Œä»–ä¸€èµ·äº«å—æˆé•¿çš„é…¸ç”œè‹¦è¾£ã€‚  æ–°æˆ¿ä»Šå¹´äº¤ä»˜ï¼Œ5 æœˆä»½å¼€å§‹äº†è£…ä¿®ã€‚æˆ‘ä»¬é€‰æ‹©çš„æ˜¯åŠåŒ…ï¼Œ480/å¹³ çš„ä»·æ ¼ï¼ŒåŒ…æ‹¬äº†æ°´ç”µï¼Œæœ¨å·¥ï¼Œç –å·¥å’Œéƒ¨åˆ†ææ–™çš„é’±ã€‚æˆ¿å­çš„ä¸»è¦è®¾è®¡å’Œæ²Ÿé€šå·¥ä½œä¸»è¦æ˜¯å²³çˆ¶å®Œæˆçš„ã€‚éå¸¸æ„Ÿè°¢ä»–ï¼Œè£…ä¿®çš„ç»†èŠ‚å¤ªå¤šäº†ï¼Œå¦‚æœæ²¡æœ‰ä¸“é—¨ç›‘ç†ç±»çš„è§’è‰²åœ¨ï¼Œè£…ä¿®å¸ˆå‚…ä»¬æ˜¯å¾ˆå®¹æ˜“åœ¨ä½ çœ‹ä¸åˆ°çš„åœ°æ–¹ç³Šå¼„è¿‡å»çš„ã€‚å¯èƒ½å’Œç°åœ¨çš„ Vibe Coding ä¸­çš„ Agent æ¯”è¾ƒåƒï¼Œä»–ä»¬æ€»æ˜¯æƒ³ä»¥æœ€çœçš„æ–¹å¼å®Œæˆéœ€æ±‚ã€‚æˆ¿å­åœ¨ 10 æœˆä»½åŸºæœ¬å®Œæˆäº†ç¡¬è£…ï¼Œæ²™å‘/åºŠ/é¤æ¡Œæ¤…ç­‰å¤§ä»¶å®¶å…·å·²ç»é…ç½®äº†ï¼Œç”±äºä¸ç€æ€¥å…¥ä½ï¼Œå®¶ç”µä¹‹ç±»çš„è¿˜æ²¡æ˜å¹´å†çœ‹çœ‹ã€‚å›½å†…çš„æ¶ˆè´¹ç¯å¢ƒå¯èƒ½è¿˜æ˜¯ä¸€æ—¶åŠä¼šå¥½ä¸èµ·æ¥ï¼Œçœ‹çœ‹æ˜å¹´ä¼šä¸ä¼šæœ‰æ›´å¤§åŠ›åº¦çš„æ¶ˆè´¹åˆºæ¿€æ”¿ç­–ã€‚  è¿åŠ¨å¥åº·æ–¹é¢ï¼Œè‡ªä»å­©å­åœ¨ 10 æœˆä»½æ„Ÿå†’åï¼Œæ·±æ„Ÿè‡ªå·±ä¹Ÿå¾—å‡å‡è‚¥/è¿è¿åŠ¨æ¥å¢å¼ºæŠµæŠ—åŠ›äº†ï¼Œå…å¾—è‡ªå·±å¾—äº†æµæ„Ÿä¼ æŸ“å­©å­ã€‚11 æœˆåŠäº†ä¹åˆ»çš„ä¼šå‘˜ï¼Œå¼€å§‹è·‘æ­¥ã€‚ä¸€ä¸ªåŠæœˆçš„æ—¶é—´ï¼Œè·‘äº† 169 kmï¼Œä½“é‡æ‰äº† 5.7 kgï¼Œä½“è„‚ç‡ä» 28.7% æ¥åˆ°äº† 20.2%ã€‚å½“ç„¶ä¹Ÿä¸ä»…æ˜¯è·‘æ­¥ï¼Œè¿˜é…åˆäº†æ¯å‘¨ä¸€æ¬¡ä¸¤ä¸ªå°æ—¶çš„äº”äººåˆ¶è¶³çƒï¼Œé¥®é£Ÿæ–¹é¢ä¹Ÿå‡ ä¹æ²¡æœ‰åƒç±³/é¢ç­‰ä¼ ç»Ÿç¢³æ°´ï¼Œæ”¹ä¸ºèŠ‹è‰¿/çº¢è–¯/ç‰ç±³/é¦™è•‰+é¸¡è›‹/é±¼ç±»/ç‰›æ’/é¸¡èƒ¸è‚‰+æ°´æœ/åšæœ+å¤§é‡è”¬èœæ··ç…®çš„ç»“æ„ï¼Œè„‚è‚ªçš„ç¡®ä¸‹é™å¾—æ¯”è¾ƒå¿«ã€‚ä½†è¿åŠ¨å¾—å¤ªç‹ ï¼Œå—ä¼¤çš„é£é™©ä¹Ÿå¢åŠ äº†ã€‚æœ€è¿‘è¸¢çƒå´´äº†è„šï¼Œå¾—ä¼‘æ¯è‡³å°‘ä¸¤å‘¨ï¼Œæ„Ÿè§‰é¥®é£Ÿä¹ æƒ¯åˆå¼€å§‹è¦åå¼¹äº†ã€‚åé¢ä¹Ÿè¦ä¸“é—¨çœ‹çœ‹è¿åŠ¨åº·å¤æ–¹é¢çš„èµ„æ–™ï¼ŒåŒæ—¶ä¹Ÿè¦åŠ å¼ºä¸‹åŠ›é‡è®­ç»ƒã€‚  11 æœˆæ¥ç§äº†å››ä»·æµæ„Ÿç–«è‹—ï¼Œåˆ°äº†åé¢æµæ„Ÿæµè¡Œçš„æ—¶å€™ï¼Œè‡ªå·±æ„Ÿè§‰è¦æ„Ÿå†’ï¼Œå‡ºç°äº†å–‰å’™å‘ç—’ï¼Œè½»å¾®å’³å—½çš„ç—‡çŠ¶ï¼Œä½†è¿‡äº†ä¸€ä¸¤å¤©å°±ä¸å†åŠ é‡äº†ï¼Œçœ‹æ¥è¿™ä¸ªç–«è‹—è¿˜æ˜¯æœ‰ç‚¹æ•ˆæœçš„ã€‚æŒ‰å¾€å¹´è¿™æ ·çš„æ—¶å€™æ˜¯ç»ä¸æ•¢å›å®¶äº†ï¼Œæ€•ä¼ æŸ“å­©å­ã€‚  è¿˜æœ‰å°±æ˜¯ä»Šå¹´è¿˜æ˜¯å¼‚åœ°çš„ä¸€å¹´ã€‚ä» 2019 å¹´æ‹çˆ±ï¼Œåˆ° 2023 å¹´ç»“å©šï¼Œå†åˆ° 2025 å¹´æœ‰äº†å­©å­ï¼Œæˆ‘è¿˜æ˜¯åœ¨å¼‚åœ°ï¼Œå¼‚åœ°äº†å¿« 6 å¹´ã€‚å¸Œæœ›æ˜å¹´èƒ½ç»“æŸå¼‚åœ°çš„çŠ¶æ€å§ï¼å·¥ä½œ  ä»Šå¹´å…¬å¸çš„ä¸šåŠ¡ä¸å¤ªå¥½äº†ï¼Œæ´»ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œè€Œä¸”å…³äºç»„ç»‡æ¶æ„è°ƒæ•´çš„åŠ¨ä½œä¸æ–­å‡ºç°ï¼Œè€Œä¸”éƒ¨é—¨å†…ä¹Ÿéƒ½æ˜¯ä¸å¥½çš„æ¶ˆæ¯ã€‚è‡ªå·±ä»Šå¹´çš„ä¸»è§‚èƒ½åŠ¨æ€§æ˜æ˜¾ä¸è¶³ï¼Œç”šè‡³å¸Œæœ›å€Ÿç€è°ƒæ•´èƒ½å›åˆ°å®¶äººèº«è¾¹æˆ–æ›´è¿‘çš„åœ°æ–¹ã€‚  å¹´åˆè®¾å®šçš„å‚ä¸å¼€æºçš„ç›®æ ‡å‡ ä¹æ— è¿›å±•å’Œè½åœ°ï¼ŒçœŸå»æƒ³å‚ä¸å¼€æºçš„æ—¶å€™å‘ç°ä¸å¥½ä¸‹æ‰‹ï¼Œç‰¹åˆ«æ˜¯ä¸ŠåŠå¹´é¢†äº† AutoMQ çš„ issue ä½†åé¢æ”¾å¼ƒäº†ï¼Œæ˜å¹´å†å‚ä¸å¥½äº†ï¼Œä»Šå¹´å¾—åˆ°çš„æ•™è®­æ˜¯ï¼š1. åœ¨å¼€æºä¸Šè¦æ”¾å¼ƒ Java ç”Ÿæ€ 2. æ‰¾è‡ªå·±å¹³æ—¶ç»å¸¸ä½¿ç”¨çš„/æ´»è·ƒçš„å¼€æºé¡¹ç›® 3. åœ¨ AI ç¼–ç æ—¶ä»£ä¸‹æ‰¾åˆ°æˆ˜èƒœæŠ€æœ¯è™šæ— ä¸»ä¹‰çš„æ€æƒ³ã€‚AI  ä»Šå¹´ä¸‹åŠå¹´é«˜é¢‘ä½¿ç”¨äº† Claude Code + GLM å¥—é¤çš„ç»„åˆæ¥è¿›è¡Œç¼–ç ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨æ™ºè°±çš„ä»£é¤ï¼Œä¸»è¦æ˜¯è§‰å¾—å¤§æ¨¡å‹çš„èƒ½åŠ›ä¼šé€šè¿‡è¿­ä»£å¿«é€Ÿè¿½å¹³(å…¶å®å°±æ˜¯ qiong)çš„,GLM çš„å¥—é¤åœ¨æˆ‘ç›®å‰çš„å·¥ä½œåœºæ™¯ä¸­å·²ç»å¤Ÿç”¨äº†ï¼Œæˆ‘å½“å‰æ›´æ³¨é‡æ›´å¥½çš„éœ€æ±‚æè¿°å’Œ openspec/cc command or skill ä»¥åŠé¡¹ç›®/ä¸ªäººä»£ç åå¥½è§„çº¦ç­‰å°† AI Agent å’Œæˆ‘æœ¬èº«çš„å·¥ä½œéœ€æ±‚åšé€‚é…ï¼Œæˆä¸ºå¤§å¹…ææ•ˆçš„åŠ©æ‰‹ã€‚  AI æ˜¯æå¤§æå‡äº†ç‰¹å®šé¢†åŸŸçš„ç”Ÿäº§æ•ˆç‡çš„ï¼Œç”Ÿäº§åŠ›çš„å¤§å¹…æå‡ï¼Œå¿…ç„¶ä¼šä¿ƒè¿›ç»„ç»‡ç»“æ„çš„å˜é©æ›´æ–°ï¼Œä»Šåçš„è½¯ä»¶å·¥ç¨‹ï¼Œå…¬å¸ç»„ç»‡æ¶æ„è‚¯å®šä¼šå‘ç”Ÿæ¯”è¾ƒå¤§çš„å˜åŒ–ï¼Œè¿™æ–¹é¢å¯èƒ½ä¼šå‡ºç°æ¯”è¾ƒå¤šçš„æ–°å½¢æ€ï¼Œæ˜å¹´å¯èƒ½å°±æ˜¯è¿™æ ·çš„ä¸€å¹´ã€‚å…¶ä»–  è¥¿å®‰ä¹‹è¡Œï¼š9 æœˆä»½ Q3 çš„å›¢å»ºç›®çš„åœ°æ˜¯è¥¿å®‰ï¼Œæˆ‘ä»¬æå‰ä¸€å¤©åˆ°è¾¾ã€‚è¥¿å®‰çš„ç¢³æ°´è¿˜æ˜¯å¾ˆé¡¶çš„ï¼Œä½†ä½œä¸ºå—æ–¹äººï¼Œå¯¹é¢é£Ÿä¸æ˜¯éå¸¸å–œæ¬¢(å°æ—¶å€™è¢«æ‘é‡Œå¤§å”è‡ªåˆ¶çš„ä½è´¨æŒ‚é¢å¼„åäº†å¯¹é¢é£Ÿçš„æ„Ÿå—)ã€‚æƒŠå–œçš„æ˜¯å’ŒåŒäº‹ä¸€èµ·å»çˆ¬äº†åå±±ï¼Œè™½ç„¶åªæœ‰åŠå¤©ï¼Œä½†ä¾ç„¶è¢«é›¨ååå±±æƒŠè‰³åˆ°äº†ï¼Œæ˜ç™½äº†å±±æ°´ç”»çš„å†™å®æ„ä¹‰ã€‚è€Œä¸”è¿˜ç¢°åˆ°äº†äº‘æµ·ä¸­çš„ä¸ƒå½©ä½›æ™•ï¼Œæ›´ç»çš„æ˜¯ï¼Œæˆ‘æ‹åˆ°äº†è‡ªå·±çš„å€’å½±åœ¨ä½›æ™•ä¸­å¿ƒæŒ¥æ‰‹çš„è§†é¢‘å’Œç…§ç‰‡ï¼Œè™½ç„¶æ‰‹æœºå˜ç„¦æ‹å‡ºæ¥ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œä½†è¿™ä¹Ÿæ˜¯ä¸€è¾ˆå­å¯èƒ½åªä¼šå‘ç”Ÿä¸€æ¬¡çš„äº‹æƒ…äº†ï¼Œéš¾é‡ä¸å¯æ±‚ã€‚  ğŸ’© æ‹‰è£¤è£†ï¼šä»Šå¹´æœ€ç³—çš„ä¸€ä»¶äº‹ï¼Œå‡ºäº†åœ°é“å›å®¶çš„å‡ åˆ†é’Ÿå¿ä¸ä½äº†ï¼Œåœ¨æ¥¼ä¸‹å‡ ç™¾ç±³çš„åœ°æ–¹é‡Šæ”¾äº†å‹åŠ›ï¼Œåœºé¢å¾ˆç³Ÿç³•ï¼Œå¼„å¾—å«ç”Ÿé—´æ°”å‘³å¾ˆå¤§ã€‚æˆ‘æƒ³è¿™æ˜¯èº«ä½“çš„ä¸€ä¸ªä¿¡å·ï¼Œåœ¨æœ€åä¸€æ¬¡è¿˜æ˜¯å­¦å‰ç­å¹²çš„äº‹è¿™æ¬¡åœ¨äºŒåå¤šå¹´ååˆå¹²äº†ï¼Œä¼´éšç€è¿™ä¸¤å¹´ä½“é‡é€æ¸è¶…æ ‡ï¼Œæ†‹ ğŸ’© çš„èƒ½åŠ›ä¹Ÿä¸å¦‚å‰ï¼Œèº«ä½“è¿™æ˜¯å‘Šè¯‰æˆ‘ç°åœ¨äºšå¥åº·äº†ï¼Œåçš„å¤šè¿åŠ¨å°‘ã€‚æˆ‘æƒ³è¿™ä»¶äº‹è¶³å¤Ÿè®©æˆ‘è­¦è§‰ï¼Œè¿åŠ¨å°†æˆä¸ºæˆ‘é•¿æœŸä¸»ä¹‰çš„é¦–é¡¹äº‹ä¸šã€‚ç»“è¯­2025 å¹´å¿«è¿‡å®Œäº†ï¼Œè¿™ä¸€å¹´æ˜¯æˆ‘äººç”Ÿä¸­é‡è¦çš„ä¸€å¹´ï¼Œä»Šåçš„æ¯ä¸€å¹´ä¹Ÿå°†ä¼šåŒæ ·é‡è¦ï¼Œå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½å¥åº·å¿«ä¹ï¼"
  },
  
  {
    "title": "é˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹é…åˆè‡ªå®¶äº‘æ•ˆ DevOps MCP token æ¶ˆè€—å·¨å¤§",
    "url": "/posts/aliyun-is-shit/",
    "categories": "AI Coding",
    "tags": "é˜¿é‡Œäº‘, Java, Claude Code, MCP",
    "date": "2025-10-09 19:50:30 +0800",
    





    
    "snippet": "ç®€è¿°â€‹    è¯•ç”¨é˜¿é‡Œäº‘æ•ˆ devops å¹³å°æ¨èçš„ mcp å·¥å…·è¿›è¡Œ ai coding çš„å®è·µ,åˆšå¼„ä¸€ä¸ªä¸ç®—å¤ªå¤§çš„éœ€æ±‚è¯•æ°´ï¼Œç»“æœé˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹ + yuxiao mcp ä¸€ä¸‹å­èŠ±è´¹äº† 25 RMB, è®°å½•ä¸‹è¿™æ¬¡å‘çˆ¹çš„ç»å†ã€‚è¯•ç”¨è¿‡ç¨‹      æ¢ç´¢å¦‚ä½•åœ¨å…¬å¸çš„é¡¹ç›®(devops è¯•ç”¨çš„é˜¿é‡Œäº‘æ•ˆ)ä¸­è½åœ° ai codingï¼Œçœ‹åˆ° é€šä¹‰çµç +äº‘æ•ˆ DevOps MCPï¼šé€šè¿‡äº‘æ•ˆå·¥ä½œé¡¹è‡ªåŠ¨ç”Ÿæˆ...",
    "content": "ç®€è¿°â€‹    è¯•ç”¨é˜¿é‡Œäº‘æ•ˆ devops å¹³å°æ¨èçš„ mcp å·¥å…·è¿›è¡Œ ai coding çš„å®è·µ,åˆšå¼„ä¸€ä¸ªä¸ç®—å¤ªå¤§çš„éœ€æ±‚è¯•æ°´ï¼Œç»“æœé˜¿é‡Œäº‘ç™¾ç‚¼å¤§æ¨¡å‹ + yuxiao mcp ä¸€ä¸‹å­èŠ±è´¹äº† 25 RMB, è®°å½•ä¸‹è¿™æ¬¡å‘çˆ¹çš„ç»å†ã€‚è¯•ç”¨è¿‡ç¨‹      æ¢ç´¢å¦‚ä½•åœ¨å…¬å¸çš„é¡¹ç›®(devops è¯•ç”¨çš„é˜¿é‡Œäº‘æ•ˆ)ä¸­è½åœ° ai codingï¼Œçœ‹åˆ° é€šä¹‰çµç +äº‘æ•ˆ DevOps MCPï¼šé€šè¿‡äº‘æ•ˆå·¥ä½œé¡¹è‡ªåŠ¨ç”Ÿæˆä»£ç å¹¶æäº¤è¯·æ±‚ çš„æ¨èå†åŠ ä¸Šæœ€è¿‘ cc + mcp çš„å®è·µï¼Œæƒ³ç€åªè¦å°†æˆ‘çš„å˜æ›´éœ€æ±‚å†™å°å†™ç»†ï¼Œåº”è¯¥èƒ½å¤Ÿé€šè¿‡ä¸Šè¿°çš„æµç¨‹å®ç°æ—¥å¸¸éœ€æ±‚çš„ ai codingï¼Œè‡ªå·±åªéœ€è¦åšå¥½ review å°±å¥½ã€‚        éœ€æ±‚ä»»åŠ¡å·¥å•    æ¥å£ï¼šPUT scrm-api/form/component  æ•°æ®ç»“æ„ç¤ºä¾‹ï¼š  {    \"components\": [      {        \"name\": \"è¾“å…¥æ¡†\",        \"type\": \"input\",        \"config\": [          {            \"label\": \"å§“å\",            \"checked\": true,            \"disabled\": true,            \"switchActive\": true,            \"isCustomize\": false          },          {            \"label\": \"æ‰‹æœºå·\",            \"checked\": true,            \"disabled\": true,            \"switchActive\": true,            \"isCustomize\": false          },          {            \"label\": \"çŸ­ä¿¡éªŒè¯\",            \"checked\": true,            \"noShow\": true          }        ]      },      {        \"name\": \"å•é€‰é¡¹\",        \"type\": \"radioButton\",        \"config\": [          {            \"label\": \"å¹´é¾„æ®µ\",            \"checked\": true,            \"disabled\": false,            \"switchActive\": true,            \"isCustomize\": false,            \"children\": [              {                \"label\": \"22\"              },              {                \"label\": \"33\"              }            ],            \"mappingFields\": []          }        ]      },      {        \"name\": \"å¤šé€‰é¡¹\",        \"type\": \"multipleChoices\",        \"config\": [          {            \"label\": \"ç›®å‰é‡åˆ°çš„é—®é¢˜\",            \"checked\": true,            \"disabled\": false,            \"switchActive\": true,            \"isCustomize\": false,            \"children\": [              {                \"label\": \"å•Šå•Š\"              },              {                \"label\": \"æœç´¢xx\"              }            ],            \"mappingFields\": []          }        ]      }    ],    \"name\": \"å¦‚æµ‹22\",    \"hint\": \"\",    \"hintChecked\": false,    \"id\": \"6721931e1bcfd54f1f532457\"  }  1. components.config.label å­—æ®µå­—æ•°é™åˆ¶è°ƒæ•´ä¸ºä¸è¶…è¿‡ 50 å­—  2. å°†å§“åå’Œæ‰‹æœºå·(+çŸ­ä¿¡éªŒè¯)åˆ†ç¦»å‡ºæ¥ä¸ºä¸¤ä¸ªå•ç‹¬ component  3. æ‰€æœ‰component æ·»åŠ æ’åºå­—æ®µ sort            é¦–å…ˆä½¿ç”¨äº†æ™ºè°±çš„ api keyï¼Œå‘ç°ä»»åŠ¡æ‰§è¡Œä¼šä¸­æ–­ï¼Œç„¶åæ¢çš„é˜¿é‡Œç™¾ç‚¼çš„ api key(ç”¨çš„ cc switch åšçš„åˆ‡æ¢)    &gt; è°ƒç”¨ yunxiao mcp ä¸­çš„å·¥å…·ï¼Œè·å– å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†é¡¹ç›®ä¸­8.3.0è¿­ä»£ä¸­Id ä¸ºNFQX-10950çš„ä»»åŠ¡è¯¦æƒ…,è¯»å–ä»»åŠ¡è¯¦æƒ…ä¸­ä¸Šä¸‹æ–‡ç›¸å…³çš„ä»£ç ï¼Œç”Ÿæˆè¯¦ç»†çš„ä»£ç æ‰§è¡Œè®¡åˆ’(ä¸éœ€è¦æ‰§è¡Œ)ï¼Œå†™å…¥åˆ° NFQX-10950.md æ–‡ä»¶ä¸­ä¾›æˆ‘review  â— æˆ‘éœ€è¦è·å–äº‘æ•ˆé¡¹ç›®ä¸­å…·ä½“ä»»åŠ¡çš„è¯¦æƒ…ã€‚è®©æˆ‘å…ˆæ‰¾åˆ°æ‚¨çš„ç»„ç»‡å’Œé¡¹ç›®ä¿¡æ¯ï¼Œç„¶åè·å–æŒ‡å®šä»»åŠ¡çš„è¯¦æƒ…ã€‚  â¿ Â {                                                                                                                                                                                                                                \"lastOrganization\": \"xxxxxxxxxxxxx\",       \"userId\": \"xxxxxxxxxxxxxxx\",     â€¦ +2 lines (ctrl+o to expand)  â¿ Â {                                                                                                                                                                                                                                \"id\": \"xxxxxxx\",       \"name\": \"xxxx\",     â€¦ +4 lines (ctrl+o to expand)â— yunxiao - search_projects (MCP)(raw_arguments:                               \"{\\\"organizationId\\\":\\\"627b12d911fc0f0c9e29a52c                               \\\",\\\"name\\\":\\\"å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†\\\"}\")â¿ Â Error: MCP error -32603: Invalid input:    [{\"code\":\"invalid_type\",\"expected\":\"string\",\"received\":\"undefined\",\"path\":[\"   organizationId\"],\"message\":\"Required\"}]    Todos  â˜’ è·å–å½“å‰ç”¨æˆ·å’Œç»„ç»‡ä¿¡æ¯  â˜ æŸ¥æ‰¾å…´æ™ºæŠ€æœ¯é¡¹ç›®  â˜ è·å–8.3.0è¿­ä»£ä¿¡æ¯  â˜ è·å–ä»»åŠ¡NFQX-10950è¯¦æƒ…  â˜ åˆ†æä»»åŠ¡ä¸Šä¸‹æ–‡å’Œç›¸å…³ä»£ç   â˜ ç”Ÿæˆè¯¦ç»†çš„ä»£ç æ‰§è¡Œè®¡åˆ’  â˜ å†™å…¥NFQX-10950.mdæ–‡ä»¶              å¯ä»¥çœ‹åˆ°è°ƒç”¨ä¸€æ¬¡ mcp çš„ tool å°±ä¸­æ–­äº†ï¼Œå› ä¸ºåç»­å‡ æ¬¡å·¥å…·å‚æ•°ä¼ çš„ä¸æ­£ç¡®ï¼Œå…¶ä»–æ¨¡å‹æ²¡æœ‰è®­ç»ƒè¿‡é˜¿é‡Œäº‘å¹³å°æœ¬èº«çš„æ•°æ®ï¼Œå¯¼è‡´å¯¹ yunxiao mcp å·¥å…·çš„è°ƒç”¨å¤±è´¥äº†ã€‚é˜¿é‡Œçš„æ¨¡å‹èƒ½å¤Ÿæ­£å¸¸è¿ç»­å·¥ä½œï¼Œä½†æ˜¯å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œconsole è¿ç»­æç¤ºäº† token æ¶ˆè€—å·¨å¤§çš„è­¦å‘Š(è¿™æ˜¯åœ¨æœ¬èº« yunxiao mcp å·¥å…·è°ƒç”¨è·å–äº‘æ•ˆä»»åŠ¡ä¿¡æ¯çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æ¶‰åŠåé¢çš„éœ€æ±‚ç†è§£å’Œä»£ç ç”Ÿæˆï¼Œå¯æƒœæ²¡æœ‰è®°å½•ä¸‹æ¥)ã€‚      åç»­: ç”¨äº†æ›´ç²¾ç¡®çš„æç¤ºè¯è§£å†³äº†æ™ºè°±æ¨¡å‹ + yunxiao mcp è¡¨ç°ä¸ä½³çš„é—®é¢˜ï¼š        ä»»åŠ¡è¦æ±‚ä½¿ç”¨ Yunxiao MCP å·¥å…·è·å–ä»»åŠ¡ NFQX-10950çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ†æç›¸å…³ä»£ç ï¼Œç”Ÿæˆè¯¦ç»†çš„ä»£ç æ‰§è¡Œè®¡åˆ’å¹¶å†™å…¥ NFQX-10950.mdæ–‡ä»¶ã€‚æ‰§è¡Œè¿‡ç¨‹1. è·å–ç»„ç»‡ä¿¡æ¯ - é€šè¿‡ mcp__yunxiao__get_current_organization_infoè·å–å½“å‰ç”¨æˆ·å’Œç»„ç»‡ID2. æœç´¢ä»»åŠ¡ - ä½¿ç”¨ mcp__yunxiao__search_workitemsåœ¨\"xxæŠ€æœ¯é¡¹ç›®ç®¡ç†\"é¡¹ç›®ä¸­æ‰¾åˆ° NFQX-109503. è·å–ä»»åŠ¡è¯¦æƒ… - é€šè¿‡ mcp__yunxiao__get_work_itemè·å–å®Œæ•´çš„éœ€æ±‚æè¿°å’Œä¸Šä¸‹æ–‡4. ä»£ç åˆ†æ - åˆ†æäº†è¡¨å•ç»„ä»¶ç›¸å…³çš„æ ¸å¿ƒæ–‡ä»¶ï¼š  - FormComponent.java (å®ä½“ç±»)  - FormComponentApi.java (APIæ§åˆ¶å™¨)  - FormComponentByWebDTO.java (DTOç±»ï¼ŒåŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘)  - FormComponentServiceImpl.java (æœåŠ¡å®ç°)            æ‰§è¡Œå†å²(å€’åºæŸ¥çœ‹)    {    \"display\": \"å¯¹äºå§“åå’Œæ‰‹æœºå·æœªåˆ†ç¦»çš„å†å²æ•°æ®ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™è‡ªåŠ¨è¿›è¡Œåˆ†ç¦»\",\t\"pastedContents\": {}},{    \"display\": \"FormComponentByWebDTOTest#testValidateLabelLengthFailure æµ‹è¯•å¤±è´¥\",\t\"pastedContents\": {}},{\t\"display\": \"è°ƒç”¨ yunxiao mcp ä¸­çš„å·¥å…·ï¼Œè·å– å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†é¡¹ç›®ä¸­8.3.0è¿­ä»£ä¸­Id ä¸ºNFQX-10950çš„ä»»åŠ¡è¯¦æƒ…,è¯»å–ä»»åŠ¡è¯¦æƒ…ä¸­ç›¸å…³çš„ä»£ç ï¼Œç”Ÿæˆè¯¦ç»†çš„ä»£ç æ‰§è¡Œè®¡åˆ’ï¼Œå†™å…¥åˆ° NFQX-10950.md æ–‡ä»¶ä¸­\",\t\"pastedContents\": {}},{\t\"display\": \"/exit \",\t\"pastedContents\": {}},{\t\"display\": \"è°ƒç”¨ yunxiao mcp ä¸­çš„å·¥å…·ï¼Œè·å– å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†é¡¹ç›®ä¸­8.3.0è¿­ä»£ä¸­Id ä¸ºNFQX-10950çš„ä»»åŠ¡è¯¦æƒ…\",\t\"pastedContents\": {}},{\t\"display\": \"/exit \",\t\"pastedContents\": {}},{\t\"display\": \"å°†ä¸Šè¿°ä»£ç ç¼–å†™è®¡åˆ’å†™å…¥åˆ° NFQX-10950.md æ–‡ä»¶ä¸­\",\t\"pastedContents\": {}},{\t\"display\": \"æ‰§è¡Œä¸Šè¿°ä¿®æ”¹\",\t\"pastedContents\": {}},{\t\"display\": \"æ ¹æ®ä¸Šè¿°ä»»åŠ¡éœ€æ±‚æè¿°ç”Ÿæˆè¯¦ç»†çš„ä»£ç ç¼–å†™è®¡åˆ’å¹¶å†™å…¥æ–‡æ¡£ï¼Œä¾›æˆ‘review\",\t\"pastedContents\": {}},{\t\"display\": \"è°ƒç”¨ yunxiao mcp ä¸­çš„å·¥å…·ï¼Œè·å– å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†é¡¹ç›®ä¸­8.3.0è¿­ä»£ä¸­Id ä¸ºNFQX-10950çš„ä»»åŠ¡è¯¦æƒ…\",\t\"pastedContents\": {}},{\t\"display\": \"è°ƒç”¨ yunxiao mcp ä¸­çš„å·¥å…·ï¼Œè·å– å…´æ™ºæŠ€æœ¯é¡¹ç›®ç®¡ç†é¡¹ç›®ä¸­8.3.0è¿­ä»£ä¸­æˆ‘çš„ä»»åŠ¡åˆ—è¡¨\",\t\"pastedContents\": {}}            æ•ˆæœ(é€šè¿‡æµ‹è¯•çš„ Git æäº¤æ€»ç»“)    æäº¤ä¿¡æ¯: feat:#NFQX-10950 ä½œè€…: saveole æäº¤æ—¶é—´:2025å¹´10æœˆ9æ—¥ 11:16:33  ğŸ“Š ç»Ÿè®¡ä¿¡æ¯- ä¿®æ”¹æ–‡ä»¶æ•°: 4ä¸ª- ä»£ç è¡Œæ•°å˜æ›´: +395è¡Œ, -1è¡Œ  ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶  1. scrm/src/main/java/com/ds/scrm/model/promo/dto/FormComponentByWebDTO.java  2. scrm/src/main/java/com/ds/scrm/model/promo/entity/BaseComponent.java  3. scrm/src/test/java/com/ds/scrm/model/promo/BaseComponentTest.java  4. scrm/src/test/java/com/ds/scrm/model/promo/FormComponentByWebDTOTest.java  ğŸ”§ ä¸»è¦åŠŸèƒ½æ”¹åŠ¨1. FormComponentByWebDTO.java æ ¸å¿ƒåŠŸèƒ½å¢å¼º- è‡ªåŠ¨åˆ†ç¦»å§“åå’Œæ‰‹æœºå·: å®ç°äº† autoSeparateNameAndPhone() æ–¹æ³•ï¼Œå½“æ£€æµ‹åˆ°ç»„  ä»¶ä¸­åŒæ—¶åŒ…å«å§“åå’Œæ‰‹æœºå·å­—æ®µæ—¶ï¼Œä¼šè‡ªåŠ¨å°†å®ƒä»¬åˆ†ç¦»æˆç‹¬ç«‹çš„ç»„ä»¶- æ ‡ç­¾é•¿åº¦éªŒè¯: æ·»åŠ äº†å­—æ®µæ ‡ç­¾é•¿åº¦é™åˆ¶ï¼Œæœ€å¤š50ä¸ªå­—ç¬¦- ç±»å‹è½¬æ¢ä¼˜åŒ–: ä¿®å¤äº† Hutool JSON å’Œ FastJSON ä¹‹é—´çš„ç±»å‹è½¬æ¢é—®é¢˜  2. BaseComponent.java å®ä½“æ‰©å±•- æ–°å¢æ’åºå­—æ®µ: æ·»åŠ äº† sort å­—æ®µç”¨äºç»„ä»¶æ’åºåŠŸèƒ½  3. æµ‹è¯•ç”¨ä¾‹å®Œå–„- BaseComponentTest.java: æ–°å¢47è¡Œæµ‹è¯•ä»£ç ï¼Œæµ‹è¯•æ’åºå­—æ®µå’ŒåŸºç¡€åŠŸèƒ½- FormComponentByWebDTOTest.java: æ–°å¢211è¡Œæµ‹è¯•ä»£ç ï¼Œè¦†ç›–ä»¥ä¸‹åœºæ™¯ï¼š  - å§“åå’Œæ‰‹æœºå·åˆ†ç¦»æˆåŠŸæ¡ˆä¾‹  - è‡ªåŠ¨åˆ†ç¦»åŠŸèƒ½æµ‹è¯•  - æ ‡ç­¾é•¿åº¦éªŒè¯æµ‹è¯•  - æ’åºå­—æ®µæµ‹è¯•            Token å’Œè´¹ç”¨æ¶ˆè€—  æ€»ç»“ç»éªŒ  è¿˜æ˜¯å¾—è´­ä¹°è®¢é˜…åˆ¶çš„ AI æœåŠ¡ï¼Œtoken æ¶ˆè€—ä¸èµ·  æç¤ºè¯å¾—å°½å¯èƒ½ç²¾ç¡®ï¼Œæä¾›æ›´å‡†ç¡®åˆ©äºå¤§æ¨¡å‹ç†è§£çš„ä¸Šä¸‹æ–‡"
  },
  
  {
    "title": "ä½¿ç”¨ BiFunction ç®€åŒ–é‡å¤ä»£ç ",
    "url": "/posts/using-BiFunction-to-simplify-code/",
    "categories": "Java",
    "tags": "Java, å‡½æ•°äº‹ç¼–ç¨‹",
    "date": "2025-04-25 13:30:30 +0800",
    





    
    "snippet": "ä½¿ç”¨ BiFunction ç®€åŒ–é‡å¤ä»£ç Java 8 å‡½æ•°å¼ç¼–ç¨‹çš„è¯­è¨€ç‰¹æ€§å‘å¸ƒè¿™ä¹ˆä¹…ï¼Œåœ¨å¹³æ—¶çš„ä¸šåŠ¡ä»£ç é‡Œç”¨çš„åšå¤šçš„è¿˜æ˜¯ Stream ç›¸å…³çš„ APIï¼Œæ¯”å¦‚ map, filter, flatMap ç­‰ï¼Œå…¶ä»–å‡½æ•°ç±»æ–¹æ³•ç”¨çš„æœ€å¤šçš„å°±æ˜¯ Function&lt;T, R&gt;ï¼ŒConsumer&lt;T&gt; å’Œ Supplier&lt;T&gt; ç­‰ï¼Œå¯ä»¥ç”¨å®ƒä»¬æ¥ä½œä¸ºé€šç”¨å‚æ•°ï¼Œèƒ½å¤Ÿå‡å°‘å¾ˆå¤šçš„...",
    "content": "ä½¿ç”¨ BiFunction ç®€åŒ–é‡å¤ä»£ç Java 8 å‡½æ•°å¼ç¼–ç¨‹çš„è¯­è¨€ç‰¹æ€§å‘å¸ƒè¿™ä¹ˆä¹…ï¼Œåœ¨å¹³æ—¶çš„ä¸šåŠ¡ä»£ç é‡Œç”¨çš„åšå¤šçš„è¿˜æ˜¯ Stream ç›¸å…³çš„ APIï¼Œæ¯”å¦‚ map, filter, flatMap ç­‰ï¼Œå…¶ä»–å‡½æ•°ç±»æ–¹æ³•ç”¨çš„æœ€å¤šçš„å°±æ˜¯ Function&lt;T, R&gt;ï¼ŒConsumer&lt;T&gt; å’Œ Supplier&lt;T&gt; ç­‰ï¼Œå¯ä»¥ç”¨å®ƒä»¬æ¥ä½œä¸ºé€šç”¨å‚æ•°ï¼Œèƒ½å¤Ÿå‡å°‘å¾ˆå¤šçš„ç›¸ä¼¼ä»£ç ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼špublic static &lt;T&gt; Long sumLong(Function&lt;T, Long&gt; mapper, final List&lt;T&gt; list) {\tif (CollUtil.isEmpty(list)) return 0L;\treturn list.stream().map(mapper).reduce(0L, Long::sum);}åœ¨è®¡ç®—æŸä¸ªåˆ—è¡¨çš„æŸä¸ªå­—æ®µå’Œæ—¶ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å°±å¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ Function&lt;T, R&gt; åªèƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå½“éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°æ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ BiFunction äº†ã€‚ BiFunction æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªç»“æœï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ª andThen(Function&lt;? super R, ? extends V&gt; after) æ–¹æ³•ï¼Œç”¨äºå¤„ç† apply æ–¹æ³•å¤„ç†åçš„ç»“æœå†å¤„ç†ã€‚ä¸‹é¢æ˜¯å®ƒçš„å®šä¹‰ï¼š/** * Represents a function that accepts two arguments and produces a result. * This is the two-arity specialization of {@link Function}. * * &lt;p&gt;This is a &lt;a href=\"package-summary.html\"&gt;functional interface&lt;/a&gt; * whose functional method is {@link #apply(Object, Object)}. * * @param &lt;T&gt; the type of the first argument to the function * @param &lt;U&gt; the type of the second argument to the function * @param &lt;R&gt; the type of the result of the function * * @see Function * @since 1.8 */@FunctionalInterfacepublic interface BiFunction&lt;T, U, R&gt; {    /**     * Applies this function to the given arguments.     *     * @param t the first function argument     * @param u the second function argument     * @return the function result     */    R apply(T t, U u);    /**     * Returns a composed function that first applies this function to     * its input, and then applies the {@code after} function to the result.     * If evaluation of either function throws an exception, it is relayed to     * the caller of the composed function.     *     * @param &lt;V&gt; the type of output of the {@code after} function, and of the     *           composed function     * @param after the function to apply after this function is applied     * @return a composed function that first applies this function and then     * applies the {@code after} function     * @throws NullPointerException if after is null     */    default &lt;V&gt; BiFunction&lt;T, U, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) {        Objects.requireNonNull(after);        return (T t, U u) -&gt; after.apply(apply(t, u));    }}ä¹‹å‰æœ‰å—ä¸šåŠ¡ä»£ç çš„é€»è¾‘æ˜¯æ‹‰å–ä¸åŒæ—¥æœŸçš„å·¨é‡å¹¿å‘Šå¹³å°çš„æµæ°´å’ŒæŠ•æ”¾æ•°æ®ï¼Œé™¤äº†æ•°æ®ç»“æ„å’Œæ¥å£åœ°å€ä¸ä¸€æ ·ä»¥å¤–ï¼Œå…¶ä»–é€»è¾‘éƒ½ä¸€æ ·ï¼Œè¿™ç§æƒ…å†µ(éœ€è¦æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡æƒ…å†µå’Œæ–¹æ³•å‚æ•°ç­‰ç»¼åˆè€ƒé‡)å°±å¾ˆé€‚åˆä½¿ç”¨ BiFunction æ¥ç®€åŒ–ä»£ç ï¼Œäºæ˜¯å°±æœ‰äº†ä¸‹é¢çš„ä»£ç ï¼š/** *  * @param base ç¬¬ä¸‰æ–¹æ¥å£è¿”å›çš„åŸºæœ¬æ•°æ®ç»“æ„ï¼ŒåŒ…å«é”™è¯¯ç /å¤±è´¥ä¿¡æ¯ç­‰ * @param pair åŒ…å«è´¦å·ä¿¡æ¯å’Œæ—¥æœŸä¿¡æ¯ç­‰ï¼Œç”¨äºå†æ¬¡è°ƒç”¨æ¥å£ * @param info åŒ…å« access_token ä¿¡æ¯ï¼Œç”¨äºå†æ¬¡è°ƒç”¨æ¥å£ * @param dataFetcher è°ƒç”¨æ¥å£å‡½æ•° * @param dateF ä¸šåŠ¡ç”¨æ—¶é—´æå–å‡½æ•° * @param advertiserF ä¸šåŠ¡ç”¨idæå–å‡½æ•° * @param clazz ç±»å‹ï¼Œä¸»è¦è®°å½•æ—¥å¿—ä¿¡æ¯ï¼ŒåŒºåˆ†ä¸åŒä¸šåŠ¡åœºæ™¯ * @param coll é›†åˆåç§°ï¼Œä¸šåŠ¡ç”¨ * @param &lt;T&gt; ä¸åŒä¸šåŠ¡åœºæ™¯çš„è¿”å›å¯¹è±¡ */private &lt;T&gt; void  handleFailed(BaseDataResponse&lt;?&gt; base, Pair&lt;AdvertiserAccountDetail, String&gt; pair, AuthInfo info,                            BiFunction&lt;AuthInfo, Pair&lt;AdvertiserAccountDetail, String&gt;, List&lt;T&gt;&gt; dataFetcher,                            Function&lt;T, String&gt; dateF, Function&lt;T, Long&gt; advertiserF, Class&lt;T&gt; clazz, String coll) {    var simpleName = clazz.getSimpleName();    var name = pair.getFirst().getName();    log.error(\"OceanEngine:{}:[{}:{}]è·å–å¹¿å‘Šä¸»[{}]æ—¥[{}]æ•°æ®å¤±è´¥ï¼ŒåŸå› ï¼š[{}]:[{}]\",            simpleName, info.getAdPlatform(), info.getAccountName(),            name, pair.getSecond(), base.getCode(), base.getMessage());    if (base.oceanTooManyReq()) {        var random = RandomUtil.randomInt(300, 600);        CompletableFuture.delayedExecutor(random, TimeUnit.SECONDS).execute(() -&gt; {            var flows = dataFetcher.apply(info, pair);            if (CollUtil.isEmpty(flows)) return;            BulkOperations operations = mongoTemplate.bulkOps(BulkOperations.BulkMode.UNORDERED, coll);            flows.forEach(f -&gt; {                var query = query(Criteria.where(\"date\").is(dateF.apply(f))                        .and(\"advertiserId\").is(advertiserF.apply(f)));                Update update = MongoDBUtils.updateBuilder(f);                operations.upsert(query, update);            });            var result = operations.execute();            int size = result.getUpserts().size();            log.info(\"OceanEngine:{}:éšæœº[5-6åˆ†é’Ÿå†…]è¡¥å¿ä»»åŠ¡ï¼Œç»“æœ:[{}]:[{}]\", simpleName, name, size);        });    }}// è°ƒç”¨1handleFailed(base, pair, authInfo, this::getDailyReportList, OceanEngineDailyReport::getDate,\t\t\t\t\tOceanEngineDailyReport::getAdvertiserId, OceanEngineDailyReport.class,\t\t\t\t\tgetDailyReportCollection());// è°ƒç”¨1çš„å‡½æ•°å®é™…æ–¹æ³•private List&lt;OceanEngineDailyReport&gt; getDailyReportList(AuthInfo authInfo, Pair&lt;AdvertiserAccountDetail, String&gt; pair) {    //...}// è°ƒç”¨2handleFailed(base, pair, authInfo, this::getDailyCashFlowList, OceanEngineDailyCashFlow::getDate,\t\t\t\t\tOceanEngineDailyCashFlow::getAdvertiserId, OceanEngineDailyCashFlow.class,\t\t\t\t\tgetDailyCashFlowCollection());// è°ƒç”¨2çš„å‡½æ•°å®é™…æ–¹æ³•                                   private List&lt;OceanEngineDailyCashFlow&gt; getDailyCashFlowList(AuthInfo authInfo, Pair&lt;AdvertiserAccountDetail, String&gt; pair) {    // ...}å…¶å®ä»£ç é‡Œè¿˜æœ‰å¾ˆå¤šè¿™æ ·å¯ä»¥é‡æ„ç®€åŒ–çš„åœ°æ–¹ï¼ŒBiFunction ç¡®å®æ˜¯ä¸€ä¸ªå¥½ç”¨çš„å·¥å…·ï¼Œä½†æ˜¯å¦‚æœç»“åˆ andThen æ–¹æ³•é«˜å¼ºåº¦ä½¿ç”¨å†åŠ ä¸Šä¸šåŠ¡å¤æ‚çš„è¯ï¼Œå¯èƒ½ä¹Ÿä¼šæœ‰ä½¿ä»£ç å¯è¯»æ€§å˜å·®çš„é£é™©ã€‚"
  },
  
  {
    "title": "Saveole's Tech Review, Issue 1",
    "url": "/posts/saveole-tech-review-1/",
    "categories": "Randomly",
    "tags": "Java, ZGC, Virtual Thread, eBPF",
    "date": "2025-03-21 21:50:30 +0800",
    





    
    "snippet": "Post      Java                  JDK 24 å‘å¸ƒäº†ï¼                  JDK 24 æœ€è¿‘(2025-03-18)å‘å¸ƒäº†, è®²ä¸‹å‡ ä¸ªè®©æˆ‘æ„Ÿå…´è¶£çš„åœ°æ–¹å§ã€‚                      Compact Object Headers                              å‹ç¼©å¯¹è±¡å¤´ï¼šå°† 64 ä½æœºå™¨çš„ HotSpo...",
    "content": "Post      Java                  JDK 24 å‘å¸ƒäº†ï¼                  JDK 24 æœ€è¿‘(2025-03-18)å‘å¸ƒäº†, è®²ä¸‹å‡ ä¸ªè®©æˆ‘æ„Ÿå…´è¶£çš„åœ°æ–¹å§ã€‚                      Compact Object Headers                              å‹ç¼©å¯¹è±¡å¤´ï¼šå°† 64 ä½æœºå™¨çš„ HotSpot JVM å¯¹è±¡å¤´ä» 96 - 128 ä½å‹ç¼©ä¸º 64 ä½ï¼Œä¸”ä¿è¯ç”±æ­¤é€ æˆçš„åå/å»¶è¿ŸæŸå¤±ä¸è¶…è¿‡ 5%ï¼Œç›¸å…³çš„é¡¹ç›®æ˜¯ Liliputã€‚Java ä¸€ç›´ä»¥è¾ƒå¤§çš„å†…å­˜å¼€é”€é—»åï¼Œå¾ˆå¤§ä¸€å—åŸå› å°±æ˜¯ Java å¯¹è±¡çš„å†—ä½™è®¾è®¡ï¼Œåœ¨äº‘åŸç”Ÿæ—¶ä»£è¿™çš„ç¡®æ˜¯ä¸€ä¸ªåŠ£åŠ¿ã€‚å¥½åœ¨ç¤¾åŒºåœ¨è¿™å—ç»ˆäºæœ‰æ‰€åŠ¨ä½œï¼Œæœ€è¿‘ä¼šèŠ±æ—¶é—´çœ‹çœ‹å‹ç¼©å¯¹è±¡å¤´åœ¨å†…å­˜è¿™å—æœ‰å¤šå¤§æå‡ã€‚                                      Stream Gatherers                              è¿™ä¸ª JEP æ˜¯å¯¹ Stream API çš„å¢å¼ºï¼Œç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰æ„å»ºæµçš„ä¸­é—´(å¦‚ jdk æä¾›çš„ filter/map/flatMap/distinct/limit ç­‰è¿”å› Stream&lt;T&gt; çš„æ–¹æ³•)æ“ä½œï¼Œç®€å•ç”¨æ³•ï¼šsource.gather(...).gather(...).gather(...).collect(...)ã€‚                                      Ahead-of-Time Class Loading &amp; Linking                              åŠ é€Ÿ JVM åº”ç”¨å¯åŠ¨æ—¶é—´çš„æŠ€æœ¯ï¼Œé€šè¿‡ç›‘æ§å’Œå­˜å‚¨ç³»ç»Ÿåœ¨è¿è¡Œæ—¶çš„ class ç­‰ä¿¡æ¯ï¼Œåœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶ç›´æ¥é“¾æ¥/åŠ è½½ä¸Šæ¬¡å­˜å‚¨çš„æ–‡ä»¶åˆ°å†…å­˜ç›´æ¥è¿è¡Œï¼Œå¤§å¤§å‡å°‘åº”ç”¨çš„å¯åŠ¨æ—¶é—´ã€‚                                      Prepare to Restrict the Use of JNI                              å¼€å§‹é™åˆ¶ JNI çš„ä½¿ç”¨ï¼Œå¼•å¯¼å¼€å‘è€…ä½¿ç”¨ Foreign Function &amp; Memory APIã€‚                                      Class-File API                              ç›´æ¥æ“ä½œå­—èŠ‚ç æ–‡ä»¶çš„ APIï¼Œå› ä¸º Java å…­ä¸ªæœˆçš„å‘ç‰ˆèŠ‚å¥å¯¼è‡´å­—èŠ‚ç æ–‡ä»¶æ ¼å¼å˜åŒ–åŠ å¿«ï¼Œæ€•ç¬¬ä¸‰æ–¹å­—èŠ‚ç æ“ä½œåº“å¦‚ ASM ç­‰è·Ÿä¸ä¸ŠèŠ‚å¥ï¼Œå®˜æ–¹è‡ªå·±ä¸‹åœºå¹²æ´»äº†ï¼Œè¿™å¯¹äº APM ç±»è½¯ä»¶ç ”å‘å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚                                      Module Import Declarations (Second Preview)                              ç±»ä¼¼å°† import java.util.*  çš„å¼•ç”¨å˜æ›´ä¸º import module java.baseï¼Œå¦‚æœå¼•ç”¨æŸä¸€ä¸ªæ¨¡å—çš„ç±»æ¯”è¾ƒå¤šçš„è¯ï¼Œè¿˜æ˜¯èƒ½å¤§å¤§ç®€åŒ– import è¯­å¥çš„ã€‚                                      ZGC: Remove the Non-Generational Mode                              ä¸Šä¸ªç‰ˆæœ¬ ZGC é»˜è®¤ä½¿ç”¨åˆ†ä»£æ¨¡å¼ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­æ˜¯ç§»é™¤ ZGC çš„éåˆ†ä»£æ¨¡å‹ã€‚                                      Permanently Disable the Security Manager                              JDK 17 ä¸­å¼€å§‹å‡†å¤‡ç§»é™¤ Security Managerï¼Œç°åœ¨æ­£å¼æ°¸ä¹…ç§»é™¤ã€‚                                      Synchronize Virtual Threads without Pinning                              ä¹‹å‰ç‰ˆæœ¬çš„ Virtual Thread + synchronized åœ¨æ‰§è¡Œæ–¹æ³•å‡ºç°é˜»å¡(ä¾‹å¦‚ IO åœºæ™¯)(pinning)çš„æƒ…å†µä¸‹ï¼ŒVT ä¸èƒ½ unmount å…¶ä¾èµ–çš„åº•å±‚ OS çº¿ç¨‹ï¼Œå¯èƒ½å¯¼è‡´çº¿ç¨‹é¥¥é¥¿ç”šè‡³æ­»é”ç­‰é—®é¢˜(å¯ä»¥é€šè¿‡ jdk.VirtualThreadPinned JFR äº‹ä»¶ç›‘æ§)ï¼ŒNetflix å›¢é˜Ÿä¹‹å‰ä¹Ÿé‡åˆ°è¿‡ï¼ŒJEP491 è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç”±æ­¤å¯¼è‡´çš„æ­»é”ä»£ç æ¡ˆä¾‹ï¼š                                                    import java.time.Duration;import java.util.List;import java.util.concurrent.locks.ReentrantLock;import java.util.stream.IntStream;import java.util.stream.Stream;/** * Demonstrate potential for deadlock on a {@link ReentrantLock} when there is both a synchronized and    * non-synchronized path to that lock, which can allow a virtual thread to hold the lock, but    * other pinned waiters to consume all the available workers. */public class VirtualThreadReentrantLockDeadlock {    public static void main(String[] args) {        final boolean shouldPin = args.length == 0 ||Boolean.parseBoolean(args[0]);        final ReentrantLock lock = new ReentrantLock(true); // With faireness to ensure that the unpinned thread is next in line        lock.lock();            Runnable takeLock = () -&gt; {            try {                System.out.println(Thread.currentThread() + \" waiting for lock\");                lock.lock();                System.out.println(Thread.currentThread() + \" took lock\");            } finally {                lock.unlock();                System.out.println(Thread.currentThread() + \" released lock\");            }        };        Thread unpinnedThread = Thread.ofVirtual().name(\"unpinned\").start(takeLock);        List&lt;Thread&gt; pinnedThreads = IntStream.range(0, Runtime.getRuntime().availableProcessors())    .mapToObj(i -&gt; Thread.ofVirtual().name(\"pinning-\" + i).start(() -&gt; {                if (shouldPin) {                    synchronized (new Object()) {                        takeLock.run();                    }                } else {                    takeLock.run();                }            })).toList();            lock.unlock();            Stream.concat(Stream.of(unpinnedThread), pinnedThreads.stream()).forEach(thread -&gt; {            try {                if (!thread.join(Duration.ofSeconds(3))) {                    throw new RuntimeException(\"Deadlock detected\");                                    }            } catch (InterruptedException e) {                throw new RuntimeException(e);            }        });    }}                (base) saveole@saveoledeMacBook-Pro src % java VirtualThreadReentrantLockDeadlock.javaVirtualThread[#25,unpinned]/runnable@ForkJoinPool-1-worker-1 waiting for lockVirtualThread[#28,pinning-0]/runnable@ForkJoinPool-1-worker-1 waiting for lockVirtualThread[#30,pinning-2]/runnable@ForkJoinPool-1-worker-3 waiting for lockVirtualThread[#29,pinning-1]/runnable@ForkJoinPool-1-worker-2 waiting for lockVirtualThread[#33,pinning-5]/runnable@ForkJoinPool-1-worker-6 waiting for lockVirtualThread[#31,pinning-3]/runnable@ForkJoinPool-1-worker-4 waiting for lockVirtualThread[#35,pinning-7]/runnable@ForkJoinPool-1-worker-9 waiting for lockVirtualThread[#32,pinning-4]/runnable@ForkJoinPool-1-worker-5 waiting for lockVirtualThread[#34,pinning-6]/runnable@ForkJoinPool-1-worker-7 waiting for lockVirtualThread[#36,pinning-8]/runnable@ForkJoinPool-1-worker-8 waiting for lockVirtualThread[#38,pinning-9]/runnable@ForkJoinPool-1-worker-10 waiting for lockException in thread \"main\" java.lang.RuntimeException: Deadlock detectedat VirtualThreadReentrantLockDeadlock.lambda$main$3(VirtualThreadReentrantLockDeadlock.java:49)at java.base/java.util.stream.Streams$StreamBuilderImpl.forEachRemaining(Streams.java:411)at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)at VirtualThreadReentrantLockDeadlock.main(VirtualThreadReentrantLockDeadlock.java:46)                            Reproducing a Java 21 virtual threads deadlock scenario with TLA+                  â€‹å¯¹ Java 21 è™šæ‹Ÿçº¿ç¨‹ + synchronized é€ æˆæ­»é”çš„è§£é‡Šæ–‡ç« ï¼Œå€¼å¾—ä¸€çœ‹ã€‚                          Spring Framework 7.0 - preview ç‰ˆæœ¬          Programmatic Bean Registration                  ç¼–ç¨‹åŒ–æ§åˆ¶ Spring Bean çš„æ³¨å†Œé€»è¾‘ï¼Œå¯ä»¥å’Œ Spring AOT ä»¥åŠ GraalVM native images å…¼å®¹ä½¿ç”¨ã€‚                    Null-safety                  ä½¿ç”¨ Jspecify è¿›è¡Œ Null å€¼æ³¨è§£æ–¹å¼æ£€æŸ¥ã€‚                    API versioning support in web applications                  é€šè¿‡åœ¨ @RequestMapping ä¸­æŒ‡å®š API ç‰ˆæœ¬è·¯ç”±åˆ°ä¸åŒçš„ controller æ–¹æ³•ä¸­ã€‚                    Optional support with null-safe and Elvis operators in SpEL expressions                  ç»ˆäºï¼ï¼ï¼ SpEL + Optional : Optional&lt;User&gt; -&gt; user?.nameSpEL + ä¸‰ç›®è¡¨è¾¾å¼ : (name != null ? name : \"Unknown\") -&gt; \"name ?: 'Unknown'\"                    GitHub  eclipse-jifa/jifa - åœ¨çº¿ GC æ—¥å¿—/Heap Dump/JFR æ–‡ä»¶å¯è§†åŒ–åˆ†æå·¥å…·ã€‚  java24-demo - JDK24 ç‰¹æ€§ç›¸å…³çš„ä»£ç ç¤ºä¾‹å’Œè§£é‡Šã€‚  hello-ebpf - ç”¨ Java ä»£ç å†™ eBPF ç¨‹åºã€‚Video  Project Lilliput - Beyond Compact Headers  Build a lightning fast Firewall with Java &amp; eBPF - Johannes Bechberger - CPH DevFest 2024Book  NaN"
  },
  
  {
    "title": "Unit Test with Mockito",
    "url": "/posts/unit-test-with-Mockito/",
    "categories": "Test",
    "tags": "Java, Mockito, Unit Test, Spring",
    "date": "2025-03-01 17:10:31 +0800",
    





    
    "snippet": "Unit Test with MockitoTags: ItTest, Mock, MockStatic, Spring Event, UT, æœªå‘å¸ƒå¤‡æ³¨: should be a blog in my Github blog project in some time      when â€¦ thenReturn â€¦ å½“æ‰§è¡ŒæŸäº›æ–¹æ³•æ—¶è¿”å› mock æ•°æ®ã€‚      // userServi...",
    "content": "Unit Test with MockitoTags: ItTest, Mock, MockStatic, Spring Event, UT, æœªå‘å¸ƒå¤‡æ³¨: should be a blog in my Github blog project in some time      when â€¦ thenReturn â€¦ å½“æ‰§è¡ŒæŸäº›æ–¹æ³•æ—¶è¿”å› mock æ•°æ®ã€‚      // userService should be annotated with @Mock  when(userService).thenReturn(some_mock_value);            when â€¦ thenReturn â€¦ å¯ä»¥é“¾å¼ thenReturn å¤šä¸ª mock å€¼ç”¨äºæŒ‡å®šæ–¹æ³•å¤šæ¬¡è°ƒç”¨æ—¶è¿”å›ä¸åŒçš„å€¼ã€‚      @Test  @DisplayName(\"æ¯æ—¥åˆ†é…ä¸Šé™æµ‹è¯•-è½®æµåˆ†é…+ä¸­é—´å‘˜å·¥æ— åˆ†é…æƒé™\")  void test_daily_limit_with_middle_limit_0_should_ok() {      when(mongoTemplate.find(any(), eq(ClueAutomaticAllot.class))).thenReturn(mockAllots);      when(mongoTemplate.updateFirst(any(), any(), eq(defaultColl))).thenReturn(mockResult());      when(clueAutomaticAllotRepo.saveAll(mockAllots)).thenReturn(null);      when(userService.findAllByUserIdsIn(anyList()))              .thenReturn(mockUserAllOnDuty(allotUserIds))              .thenReturn(mockUserAllOnDuty(List.of(\"627a29d4b3e8940001ae07b0\")))              .thenReturn(mockUserAllOnDuty(List.of(\"627a29d4b3e8940001ae07b0\")));      when(mongoTemplate.aggregate(any(Aggregation.class), eq(defaultColl), eq(UserAllotData.class)))              .thenReturn(mockAggResultEmpty())              .thenReturn(mockAggResultWithLimit_1())              .thenReturn(mockAggResultWithLimit_2());          // ç¬¬ä¸€æ¬¡åˆ†é…ç»™ç”¨æˆ·1      clueAutomaticAllotService.autoAllot(mockInsertTask(List.of(matchPoolAndChannel_1())));      assertEquals(\"61c877b13222fa00011c91bb\", mockAllots.get(1).getLastAllotUser());      // ç¬¬äºŒæ¬¡åˆ†é…ç»™ç”¨æˆ·3      clueAutomaticAllotService.autoAllot(mockInsertTask(List.of(matchPoolAndChannel_1())));      assertEquals(\"627a29d4b3e8940001ae07b0\", mockAllots.get(1).getLastAllotUser());      // ç¬¬ä¸‰æ¬¡åˆ†é…ç»™ç”¨æˆ·3      clueAutomaticAllotService.autoAllot(mockInsertTask(List.of(matchPoolAndChannel_1())));      assertEquals(\"627a29d4b3e8940001ae07b0\", mockAllots.get(1).getLastAllotUser());          // ç›¸åº”çš„ event äº‹ä»¶ä»£ç é€»è¾‘åº”è¯¥æ‰§è¡Œäº†ä¸‰æ¬¡      verify(opLogService, times(3)).publishOplog(any(OpLog.class));      verify(eventPublisher, times(3)).publishEvent(any(ReclaimTaskEvent.class));  }            thenAnswer() æ ¹æ®æ–¹æ³•å‚æ•°åŠ¨æ€çµæ´»çš„è¿”å›æ•°æ®ã€‚      @ExtendWith(MockitoExtension.class)  class PersonServiceTest {          @Mock      PersonRepository repository;          @InjectMocks      PersonService service;          List&lt;Person&gt; people = List.of(              new Person(\"1\", \"jack\", 15),              new Person(\"2\", \"jacsk\", 16),              new Person(\"3\", \"jackie\", 17)      );          @Test      void saveAllPeople() {          when(repository.save(any(Person.class))) // mock save æ“ä½œ                  .thenAnswer(invocation -&gt; invocation.getArgument(0)); // è¿”å›ä¼ å…¥çš„å‚æ•°          var ids = service.savePeople(people);          assertThat(ids).hasSize(3); // éªŒè¯ä¿å­˜äº† 3 ä¸ªå¯¹è±¡      }  }            doNothing().when(mock).method(any(Argument.class))  é€‚ç”¨ void æ–¹æ³•      doNothing().when(eventPublisher).publishEvent(any(ReclaimTaskEvent.class));        mockStatic  é™æ€æ–¹æ³• mock          å‰æï¼šåœ¨ resources æ–‡ä»¶å¤¹ä¸‹åˆ›å»º mockito-extensions æ–‡ä»¶å¤¹ï¼Œåˆ›å»º   org.mockito.plugins.MockMaker æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼šmock-maker-inline              single static method          try (MockStatic&lt;StaticClass&gt; staticClass = Mockito.mockStatic(StaticClass.class)) {      staticClass.when(StaticClsss::staticMethod).thenReturn(some_mock_value);  }                    nested static methods                  nested try blocks with Mockito mockStatic statementï¼                  try (MockedStatic&lt;ServletUtil&gt; servletUtilMockedStatic = Mockito.mockStatic(ServletUtil.class)) {      try (MockedStatic&lt;ContextUtil&gt; contextUtilMockedStatic = Mockito.mockStatic(ContextUtil.class)) {          contextUtilMockedStatic.when(ContextUtil::getServletRequest).thenReturn(null);          contextUtilMockedStatic.when(ContextUtil::currentCusColl).thenReturn(cusColl);          servletUtilMockedStatic.when(() -&gt; ServletUtil.getClientIP(null)).thenReturn(\"0.0.0.0\");          ModifyResult result = customerService.pickUp(List.of(notDistributedOne));          assertEquals(1, result.getSuccessCount());          assertEquals(0, result.getFailedCount());          // æ›´æ–°åæ•°æ®æ ¡éªŒ          LinkedHashMap updated = findOne(notDistributedOne);          assertEquals(\"å·²åˆ†é…\", updated.get(\"åˆ†é…çŠ¶æ€\"));          assertEquals(user.getId(), updated.get(\"followUser\"));          assertEquals(user.getName(), updated.get(\"è·Ÿè¿›äºº\"));          assertEquals(user.getName(), updated.get(\"æœ€è¿‘æ“ä½œäºº\"));          assertEquals(1, updated.get(\"é¢†å–æ¬¡æ•°\"));      }  }                          éªŒè¯æ–¹æ³•æ‰§è¡Œæ¬¡æ•° verify + times      // æ ¡éªŒå‘å¸ƒäº‹ä»¶æ¬¡æ•°  verify(eventPublisher, times(1)).publishEvent(any(ReclaimTaskEvent.class));  verify(eventPublisher, times(1)).publishEvent(any(OpLog.class));            éªŒè¯æ–¹æ³•æ‰§è¡Œé¡ºåº inOrder      // verify the methods are called once, in the right order  InOrder inOrder = inOrder(repository, translationService);  inOrder.verify(repository).findById(anyInt());  inOrder.verify(translationService).translate(anyString(), eq(\"en\"), eq(\"en\"));            spy() ç”¨äºéƒ¨åˆ† mock          You can intercept method calls to the dependencies for later verification.      You can mock some methods in the dependencies rather than all of them. This is called a partial mock.          @Test  void spyOnRepository() {      // Spy on the in-memory repository  \t\tPersonRepository personRepo = spy(new InMemoryPersonRepository());   \t\tPersonService personService = new PersonService(personRepo);  \t\tpersonService.savePeople(people.toArray(Person[]::new)); assertThat(personRepo.findAll()).isEqualTo(people);      // Verify the method calls on the spy      verify(personRepo, times(people.size())).save(any(Person.class));  }        æ–¹æ³•å…¥å‚æ ¡éªŒ ArgumentMatcher          åŸºæœ¬ç±»å‹ç³»åˆ—ï¼šanyByte, anyShort, anyInt, anyLong, anyFloat, anyDouble, anyChar, and anyBoolean.      é›†åˆç±»å‹ç³»åˆ—ï¼šanyCollection, anyList, anySet, and anyMap      å­—ç¬¦ä¸²ç³»åˆ—ï¼šanyString, startsWith, endsWith, and the two overloads of matches, one that takes a regular expression as a string and the other a Pattern.      null æ£€æŸ¥ï¼šisNull and isNotNull (and its companion, notNull, which is just an alias), and nullable(Class), which matches either null or a given type.      ç­‰å€¼åˆ¤æ–­ï¼šeq()        è‡ªå®šä¹‰æ–¹æ³•å…¥å‚æ ¡éªŒå™¨          å®ç° ArgumentMatcher&lt;T&gt;      argThat() + lambda Predicate        âš ï¸Â å¦‚æœæ˜¯åŸºæœ¬ç±»å‹å‚æ•°éœ€è¦å¯¹åº”ä½¿ç”¨ byteThat, shortThat, charThat, intThat, longThat, floatThat, doubleThat, and booleanThat. æ­¤ä¸¾å¯é¿å…å› ä¸ºè£…æ‹†ç®±é—®é¢˜å¼•èµ·çš„ NPE é—®é¢˜ã€‚      when(userRepo.findById(argThat(id -&gt; id.startsWith(\"user\")))).thenReturn(Optional.of(user));        Spring Boot Application Event Test  @DataMongoTest with testcontainers      BDDMockito given/when/then å†™æ³•ï¼š      @Test  public void findMaxId_BDD() {      given(repository.findAll()).willReturn(people);      assertThat(service.getHighestId()).isEqualTo(14);      then(repository).should().findAll();  }        Mock send spring event and consume spring event                  é’ˆå¯¹ ApplicationEvent äº‹ä»¶å¯ä»¥æ–­è¨€å•ä¸ªæ–¹æ³•å†…å‘é€äº†å‡ æ¬¡ event.          // æ ¡éªŒå‘å¸ƒäº‹ä»¶æ¬¡æ•°  verify(eventPublisher, times(1)).publishEvent(any(ReclaimTaskEvent.class));  verify(eventPublisher, times(1)).publishEvent(any(OpLog.class));                          How to assert a rest api with MockMvc      MvcResult result = mockMvc.perform(post(\"/api/users\").header(\"Authorization\", base64ForTestUser).contentType(MediaType.APPLICATION_JSON)              .content(\"{\\\"userName\\\":\\\"testUserDetails\\\",\\\"firstName\\\":\\\"xxx\\\",\\\"lastName\\\":\\\"xxx\\\",\\\"password\\\":\\\"xxx\\\"}\"))              .andDo(MockMvcResultHandlers.print())              .andExpect(status().isBadRequest())  \t\t\t\t\t\t.andExpect(jsonPath(\"data.total\").value(5))  \t\t\t\t\t\t// å¯¹äº json æ•°ç»„çš„ä¸­å…ƒç´ å­—æ®µè¿›è¡Œæ–­è¨€  \t\t\t\t\t\t.andExpect(jsonPath(\"data.content.[0].createUser\").value(\"62c7ec65baaca09ad14dbd9f\"))  \t\t\t\t\t\t// todo ä¹Ÿä¼šæœ‰ä¸­æ–‡ä¹±ç é—®é¢˜  \t\t\t\t\t\t.andExpect(content().string(Matchers.containsString(\"expected string\")))              .andReturn();      // æŒ‡å®šç¼–ç é˜²æ­¢ä¸­æ–‡ä¹±ç   String content = result.getResponse().getContentAsString(StandardCharsets.UTF_8);  // do what you want, usually do some assertions      Mock, Stub, Spy"
  },
  
  {
    "title": "Saveole's Tech Review, Issue 0",
    "url": "/posts/saveole-tech-review-0/",
    "categories": "Randomly",
    "tags": "Java, SSE, ZGC, Go, Raft",
    "date": "2024-09-21 16:50:30 +0800",
    





    
    "snippet": "Post      Java                  JDK 23 å‘å¸ƒäº†ï¼                  â€‹        å‰ä¸ä¹…ï¼Œgo å‘å¸ƒäº† 1.23 ç‰ˆæœ¬ï¼ŒJava æœ€è¿‘ä¹Ÿå¦‚æœŸå‘å¸ƒäº† JDK 23(none tls)ï¼Œä¸»è¦æ›´æ–°å¤§éƒ¨åˆ†è¿˜æ˜¯ preview é˜¶æ®µçš„ææ¡ˆï¼Œä¸ªäººå°è±¡æ·±åˆ»ç‚¹çš„ ä¸€(JEP474)æ˜¯ ZGC é»˜è®¤ä½¿ç”¨åˆ†ä»£æ¨¡å¼(Generational Mode), ...",
    "content": "Post      Java                  JDK 23 å‘å¸ƒäº†ï¼                  â€‹        å‰ä¸ä¹…ï¼Œgo å‘å¸ƒäº† 1.23 ç‰ˆæœ¬ï¼ŒJava æœ€è¿‘ä¹Ÿå¦‚æœŸå‘å¸ƒäº† JDK 23(none tls)ï¼Œä¸»è¦æ›´æ–°å¤§éƒ¨åˆ†è¿˜æ˜¯ preview é˜¶æ®µçš„ææ¡ˆï¼Œä¸ªäººå°è±¡æ·±åˆ»ç‚¹çš„ ä¸€(JEP474)æ˜¯ ZGC é»˜è®¤ä½¿ç”¨åˆ†ä»£æ¨¡å¼(Generational Mode), äºŒ(JEP471)æ˜¯ sun.misc.Unsafe çš„å¤§éƒ¨åˆ† memory-access ç›¸å…³çš„æ–¹æ³•è¢«æ ‡è®° @Deprecated äº†ï¼Œä»¥åä¼šç§»é™¤ï¼Œç±»åº“çš„å¼€å‘è€…éœ€è¦é¢å¤–æ³¨æ„ä¸‹ï¼Œå¯ä»¥ç”¨ JEP 193 å’Œ JEP 454 ä¸­æåŠçš„ API æ›¿ä»£ã€‚ps: ä» 471 çœ‹ï¼ŒJava çš„æ›´æ–°è¿˜æ˜¯å¾ˆå…‹åˆ¶çš„ï¼Œå……åˆ†è€ƒè™‘åˆ°è€ç”¨æˆ·çš„å…¼å®¹é—®é¢˜ï¼Œä½†å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥çœ‹åˆ° Java çš„å¤§ä½“é‡å¯¹äºæ–°äº‹ç‰©çš„æ¨å¹¿è¿˜æ˜¯å¾ˆæ…¢çš„ï¼Œç°åœ¨ Java ä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬è¿˜æ˜¯ Java 8ï¼Œæˆ‘åœ¨é¢è¯•å€™é€‰äººçš„æ—¶å€™ä¸€è¯´èµ· Java çš„æ–°ç‰¹æ€§æ˜¯ Lambda/Stream æµçš„æ—¶å€™å°±çš±èµ·äº†çœ‰å¤´ ğŸ˜‚          â€‹        ä¹Ÿå¯çœ‹çœ‹ foojay ä¸Šè¿™ç¯‡å¯¹äº JDK 23 çš„è§£è¯»æ–‡ç« ã€‚                            Spring Boot CDS support and Project Leyden anticipation                  â€‹        ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Spring Boot 3.3 + CDS + Leydon + Spring Native æ„å»ºåº”ç”¨ç¨‹åºä»¥æ˜¾è‘—å‡å°‘ Spring Boot åº”ç”¨çš„å¯åŠ¨æ—¶é—´å’Œè¿è¡Œæ—¶å†…å­˜æ¶ˆè€—ï¼Œéå¸¸æ¨èçœ‹ä¸€çœ‹è¯•ä¸€è¯•ã€‚                            Bending pause times to your will with Generational ZGC                  â€‹        Netflix ä½¿ç”¨ JDK21 + åˆ†ä»£ ZGC çš„å®è·µï¼Œéå¸¸å¥½ï¼Œä¿ºä¹Ÿæƒ³åœ¨ç”Ÿäº§ç¯å¢ƒè¯•è¯• ğŸ¶                          Go                  How to implement Server-Sent Events in Go                  â€‹        SSE(Server-Sent Events) æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯ä¸æ–­å‘é€ event çš„å•å‘é€šä¿¡åè®®(ä¸åŒäº WebSocket çš„åŒå‘é€šä¿¡ )ï¼Œåº•å±‚ä¹Ÿæ˜¯åŸºäº HTTPï¼Œå¯ä»¥ç”¨äºéœ€è¦æœåŠ¡ç«¯å®æ—¶ç”Ÿæˆå†…å®¹çš„åœºæ™¯ï¼Œå¦‚ ChatGPT çš„æµå¼ç›¸åº”ç­‰ã€‚          â€‹        è¿™ç¯‡æ–‡ç« ä½¿ç”¨ go çš„ net/http å®ç°äº†ä¸€ä¸ªç®€å•çš„ SSE æ¡ˆä¾‹ï¼Œå¯ä»¥çœ‹åˆ° go çš„åŸºç¡€ç±»åº“è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œæ¯” Java è¦ç®€æ´å¾ˆå¤šã€‚          å‰ä¸ä¹…ä½¿ç”¨ gin æ¡†æ¶ä¹Ÿå®ç°äº† SSEï¼š          func ScriptRecognize(c *gin.Context) {\tid := c.Param(\"id\")\tvar record models.ScriptUploadRecord\terr := models.FindOne(common.TB_SCRIPT, bson.M{\"_id\": bson.ObjectIdHex(id)}, nil, &amp;record)\tif err != nil {\t\tc.JSON(http.StatusOK, helpers.Fail(err))\t\treturn\t}\tif len(record.Texts) &gt; 0 {\t\ttxt := strings.Join(record.Texts, \"\")\t\tc.Stream(func(w io.Writer) bool {\t\t\tc.String(200, \"data: %s\\n\\n\", txt)\t\t\treturn false\t\t})\t\treturn\t}\tchanStream := make(chan string, 100)\tgo recognizer.RecognizeFromUrl(record.FileUrl, chanStream)\tcontent := make([]string, 0)\tc.Header(\"Content-Type\", \"text/event-stream\")\tc.Header(\"X-Accel-Buffering\", \"no\")\tc.Stream(func(w io.Writer) bool {\t\tif msg, ok := &lt;-chanStream; ok {\t\t\tfmt.Printf(\"è½¬æ–‡æœ¬ï¼š%s\", msg)\t\t\tc.String(200, \"data: %s\\n\\n\", msg)\t\t\tcontent = append(content, msg)\t\t\treturn true\t\t}\t\tgo updateScript(id, \"texts\", content)\t\treturn false\t})}                    â€‹        ä¸»è¦æ³¨æ„çš„å°±æ˜¯ï¼š1. header çš„æ§åˆ¶å‚æ•° 2. event å‘é€çš„æ ¼å¼                            Donâ€™t defer Close() on writable files                  â€‹        ä¸è¦å› ä¸ºä½¿ç”¨äº† defer io.Closer.Close() è€Œå¿½ç•¥äº†åç»­æ“ä½œç³»ç»Ÿå› ä¸º close syscall ä¸æˆåŠŸäº§ç”Ÿçš„ error ,å»ºè®®ç”¨ return f.Close() â€“&gt; os è¿˜æ˜¯ä¸ä¸€å®šé©¬ä¸Šåˆ·ç›˜ï¼Œæˆ–è€… return f.Sync() â€“&gt; é©¬ä¸Šåˆ·ç›˜ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚                            Implementing Raft: Part 2 - Commands and Log Replication                  â€‹        ä¸€ä¸ªå®ç°ç®€å• raft åè®®çš„å›½å¤–æ•™ç¨‹çš„ Log Replication éƒ¨åˆ†ï¼Œç¿”å®çš„ test case ä»¥åŠ log å¯è§†åŒ–(html è¡¨æ ¼å¯¹æ¯”å½¢å¼)åšçš„å¾ˆå¥½ï¼Œè¦æ˜¯åšæˆåŠ¨æ€å¯è§†åŒ–å°±æ›´å¥½äº†ã€‚                    GitHub  petclinic-efficient-container - ç»å…¸ Spring Boot æ¼”ç¤ºé¡¹ç›® spring-petclinic çš„ä¼˜åŒ–ç‰ˆ  eraft - ä¸€æ­¥æ­¥å®ç° raft åè®®å¹¶æ‰“é€ ä¸€ä¸ªåˆ†å¸ƒå¼ KV å­˜å‚¨  starflare - ç»™è‡ªå·± star çš„é¡¹ç›®åˆ†ç±»/æ‰“æ ‡ç­¾  omakub - é…ç½®å…¨æ–°å®‰è£…çš„ Ubuntu çš„å·¥å…·Video  Implementing Domain Driven Design with Spring by Maciej Walkowiak @ Spring I/O 2024Book      Build Your Own Database From Scratch in Go          çœ‹äº†ä¸€ç‚¹ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œæœ€è¿‘åœ¨å®ç° raft çš„æ—¶å€™å‘ç° go åŸºç¡€å¾ˆä¸å¥½ï¼Œå…ˆè¡¥åŸºç¡€ï¼Œåé¢å†æ¥å­¦ä¹ ã€‚      "
  },
  
  {
    "title": "ç”¨ Slidev å†™ PPT å¹¶ä½¿ç”¨ Github Pages éƒ¨ç½²åˆ°è‡ªå·±çš„åšå®¢ä¸Š",
    "url": "/posts/use-slidev-make-ppt-and-deploy-to-giithub-pages/",
    "categories": "åšå®¢",
    "tags": "Blog, PPT",
    "date": "2024-07-24 17:55:00 +0800",
    





    
    "snippet": "      Prerequisites          åŸºäº Github Pages æ„å»ºçš„é™æ€ä¸ªäººåšå®¢ç½‘ç«™            Steps                  ä½¿ç”¨ Slidev åˆ›å»ºè‡ªå·±çš„ ppt é¡¹ç›®å¹¶ä¸Šä¼ åˆ° Github ä¸Šçš„å•ç‹¬ Repository                    é…ç½®å¼€å¯ä»“åº“çš„ Github Pages                 ...",
    "content": "      Prerequisites          åŸºäº Github Pages æ„å»ºçš„é™æ€ä¸ªäººåšå®¢ç½‘ç«™            Steps                  ä½¿ç”¨ Slidev åˆ›å»ºè‡ªå·±çš„ ppt é¡¹ç›®å¹¶ä¸Šä¼ åˆ° Github ä¸Šçš„å•ç‹¬ Repository                    é…ç½®å¼€å¯ä»“åº“çš„ Github Pages                      é…ç½® Github Action                  æˆ‘çš„ .github/workflows/deploy.yml å¦‚ä¸‹ï¼š                  # Simple workflow for deploying static content to GitHub Pages  name: Deploy static content to Pages          on:    # Runs on pushes targeting the default branch    push:      branches: [\"main\"]            # Allows you to run this workflow manually from the Actions tab    workflow_dispatch:          # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages  permissions:    contents: read    pages: write    id-token: write          # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.  # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.  concurrency:    group: \"pages\"    cancel-in-progress: false          jobs:    # Single deploy job since we're just deploying    deploy:      environment:        name: github-pages        url: $      runs-on: ubuntu-latest      steps:        - name: Checkout          uses: actions/checkout@v4        - name: Setup node          uses: actions/setup-node@v4          with:            node-version: \"lts/*\"        - name: Install dependencies          run: npm install        - name: Install slidev          run: npm i -g @slidev/cli        - name: Build          run: slidev build --base /java_app_build_docker_image/        - name: Setup Pages          uses: actions/configure-pages@v5        - name: Upload artifact          uses: actions/upload-pages-artifact@v3          with:            # Upload entire repository            path: dist        - name: Deploy to GitHub Pages          id: deployment          uses: actions/deploy-pages@v4                          Finish          å†™å¥½ ppt åï¼Œpush åˆ°ä»“åº“è‡ªåŠ¨æ„å»ºéƒ¨ç½²åˆ°è‡ªå·±çš„ä¸ªäººåšå®¢ä¸­ï¼Œæ•ˆæœï¼šJava åº”ç”¨å¦‚ä½•æ„å»º Docker é•œåƒ            Notes:          slidev build --base /java_app_build_docker_image/ éœ€è¦æŒ‡å®šç‰¹å®šå­è·¯ç”±çš„æ—¶å€™ï¼Œæœ€å¥½å°†å­è·¯ç”±åç§°å’Œä»“åº“åç§°ä¿æŒä¸€è‡´      æˆ‘æ„å»ºéƒ¨ç½²å¥½çš„ ppt åœ°å€åœ¨ Edge æµè§ˆå™¨ä¸‹æ²¡æœ‰é»˜è®¤é‡å®šå‘åˆ° /1 å³ ppt é¦–é¡µï¼Œä½† FireFox å°±å¯ä»¥ï¼Œå¾ˆå¥‡æ€ªï¼Œå¾…æˆ‘çœ‹çœ‹.      ä½¿ç”¨çš„ Slidev ä¸»é¢˜ï¼šacademic      å‚è€ƒçš„ PPTï¼š exploring-social-engineering-slides      "
  },
  
  {
    "title": "Java åº”ç”¨å¦‚ä½•æ„å»º Docker é•œåƒ",
    "url": "/posts/java-app-docker-image/",
    "categories": "åšå®¢",
    "tags": "Java, Docker, APM, PPT",
    "date": "2024-07-22 18:10:00 +0800",
    





    
    "snippet": "  slide",
    "content": "  slide"
  },
  
  {
    "title": "åšå®¢æ–¹æ¡ˆï¼šJekyll + Chirpy",
    "url": "/posts/jekyll-chirpy/",
    "categories": "åšå®¢",
    "tags": "Jekyll",
    "date": "2024-05-31 13:38:00 +0800",
    





    
    "snippet": "  å®‰è£… Jekyll (Ubuntu 24.04)          å…ˆè£… Ruby å’Œç›¸å…³ä¾èµ–é¡¹: sudo apt-get install ruby-full build-essential zlib1g-dev              è®¾ç½®å½“å‰ç”¨æˆ·æœ‰ gem çš„æ‰§è¡Œæƒé™          echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~...",
    "content": "  å®‰è£… Jekyll (Ubuntu 24.04)          å…ˆè£… Ruby å’Œç›¸å…³ä¾èµ–é¡¹: sudo apt-get install ruby-full build-essential zlib1g-dev              è®¾ç½®å½“å‰ç”¨æˆ·æœ‰ gem çš„æ‰§è¡Œæƒé™          echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.bashrc  echo 'export GEM_HOME=\"$HOME/gems\"' &gt;&gt; ~/.bashrc  echo 'export PATH=\"$HOME/gems/bin:$PATH\"' &gt;&gt; ~/.bashrc  source ~/.bashrc                    å®‰è£… Jekyll: gem install jekyll bundler        ä½¿ç”¨ Chirpy ä¸»é¢˜          Clone æˆ–ä¸‹è½½ https://github.com/cotes2020/chirpy-starter ä»“åº“      å®‰è£…ä¾èµ–ï¼š bundle      å¯åŠ¨é¡¹ç›®ï¼š bundle exec jekyll s      è®¿é—®ï¼šhttp://localhost:4000        åŸºæœ¬é…ç½®åŠå†™ post          https://chirpy.cotes.page/posts/getting-started/      https://chirpy.cotes.page/posts/write-a-new-post/        åˆæ¬¡æ„Ÿå—          æ¸…æ–°ç®€æ´ï¼Œå¤§æ–¹ç¾è§‚ï¼Œå“åº”è¿…é€Ÿ      å®šåˆ¶é¡¹æŒºå¤šï¼Œæ”¯æŒè§†é¢‘/éŸ³é¢‘ç­‰åª’ä½“æ ¼å¼      ä»è‡ªå·±å¹³æ—¶å†™çš„ Markdown æ–‡ä»¶è½¬æ¢è¿‡æ¥è¦æ”¹é€ çš„å†…å®¹ä¹ŸæŒºå¤šçš„ï¼Œ å¯ä»¥è€ƒè™‘å†™ä¸ªç¨‹åºåšè¿™ä¸ªäº‹æƒ…      å…¶ä»–æ›´ç»†è‡´çš„ä½“éªŒå¾…è‡ªå·±æ·±å…¥ä½¿ç”¨å†è¯„ä»·            Changelog          å‡†å¤‡ä½¿ç”¨è¿™ä¸ªä½œä¸ºè‡ªå·±çš„åšå®¢æ¡†æ¶ï¼Œå…ˆæŠŠåšå®¢å†™èµ·æ¥å†è°ˆå…¶ä»–              å¤´åƒ/è”ç³»æ–¹å¼ç­‰è®¾ç½®        favicon æ›¿æ¢        æ¥å…¥ giscus è¯„è®ºç³»ç»Ÿ - martinâ€˜s blog        æ¥å…¥ Google Analytics        å›½å†…ç½‘ç»œç¯å¢ƒåŠ é€Ÿ - æ˜¯å¦æœ‰å¿…è¦ï¼Ÿ è¿˜æ˜¯å…ˆè¾“å‡ºå†…å®¹ä¸ºä¸»ï¼Œä¸åšè¿‡æ—©ä¼˜åŒ–ã€‚              å’Œ Gmeek çš„ç®€å•å¯¹æ¯”          ä¹‹å‰çš„åšå®¢æ¡†æ¶ä¸»è¦æ ¹æ® GitHub Issue as a Blog å’Œ Gmeek å¿«é€Ÿä¸Šæ‰‹ æ„å»ºçš„ã€‚      Gmeek æ˜¯åŸºäº GitHub Issues çš„ï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ç®€æ´, ç„¶åæ˜¯éƒ½åŸºäº GitHub å¹³å°ï¼Œä¸ç”¨åœ¨æœ¬åœ°å®‰è£…å„ç§ç¯å¢ƒï¼Œé‡åˆ°çš„æœ€å¤§é—®é¢˜æ˜¯ä¹‹å‰ Gmeek æä¾›çš„ Github Action è„šæœ¬ä¸å…¼å®¹ï¼Œå¯¼è‡´åç»­çš„æ„å»ºå¤±è´¥ã€‚      Chirpy å¯¹äº Gmeek çš„è¯ï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰é¡µé¢å¸ƒå±€è¦å¥½ä¸€ç‚¹ï¼Œå¯é…ç½®çš„åœ°æ–¹ä¹Ÿè¦ä¸°å¯Œä¸€ç‚¹ã€‚      "
  },
  
  {
    "title": "GraalVM Native + Base64 ç¼–è§£ç å‘½ä»¤è¡Œå°å·¥å…·å¼€å‘",
    "url": "/posts/graalvm-native-java-base64-command-line-tool/",
    "categories": "æŠ€æœ¯, Java",
    "tags": "GraalVM, Java, JShell",
    "date": "2024-04-29 13:38:00 +0800",
    





    
    "snippet": "  åˆè¡·ï¼š          æµè§ˆ  V ç«™ å¸–å­æœ‰å¾ˆå¤š Base64 åŠ å¯†çš„ä¿¡æ¯ï¼Œå¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿè§£å¯†ã€‚        å®ç°ï¼š                  v1ï¼šç›´æ¥ä½¿ç”¨ JShell å‘½ä»¤è¡Œè¿è¡Œ Java ä»£ç è§£å¯†          ant@ant:~$ jshell   |  Welcome to JShell -- Version 17.0.9  |  For an introdu...",
    "content": "  åˆè¡·ï¼š          æµè§ˆ  V ç«™ å¸–å­æœ‰å¾ˆå¤š Base64 åŠ å¯†çš„ä¿¡æ¯ï¼Œå¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿè§£å¯†ã€‚        å®ç°ï¼š                  v1ï¼šç›´æ¥ä½¿ç”¨ JShell å‘½ä»¤è¡Œè¿è¡Œ Java ä»£ç è§£å¯†          ant@ant:~$ jshell   |  Welcome to JShell -- Version 17.0.9  |  For an introduction type: /help intro          jshell&gt; var enc = \"c2F2ZW9sZQ==\"  enc ==&gt; \"c2F2ZW9sZQ==\"          jshell&gt; var decodedBytes = Base64.getDecoder().decode(enc.getBytes())  decodedBytes ==&gt; byte[8] { 115, 97, 118, 101, 95, 111, 108, 101 }          jshell&gt; new String(decodedBytes)  $3 ==&gt; \"saveole\"                            v2ï¼šGraalVM Native çš„æ–¹å¼å°† Java ç¨‹åºç¼–è¯‘æ‰“åŒ…æˆå¯æ‰§è¡Œæ–‡ä»¶å°å·¥å…·                              åŸ Java ç¨‹åºï¼š              import java.util.Base64;              public class Base64Tool {      static String helpMsg = \"\"\"  \t\t-e Encode input string  \t\t-d Decode input string               \"\"\";;                      public static void main(String[] args) {          if (args == null || args.length == 0) {              System.err.println(helpMsg);              System.exit(1);          }          var arg = args[0];          switch(arg) {            case \"-help\":                System.out.println(helpMsg);                break;            case \"-e\":                var toEncode = getAndCheckArg(args);                System.out.println(new String(Base64.getEncoder().encode(toEncode.getBytes())));                break;            case \"-d\":                var toDecode = getAndCheckArg(args);                System.out.println(new String(Base64.getDecoder().decode(toDecode.getBytes())));                break;            default:                System.err.println(\"Unknown command, use -help to see how to use this tool.\");                break;          }          System.exit(1);      }                  static String getAndCheckArg(String[] args) {          if (args == null || args.length &lt; 2) {              System.err.println(\"Please input valid string\");              System.exit(0);          }          return args[1];      }  }                                            ä½¿ç”¨ native-image ç¼–è¯‘æ„å»ºå¯æ‰§è¡Œç¨‹åº              ant@ant:~/native$ javac Base64Tool.java   ant@ant:~/native$ native-image Base64Tool  ========================================================================================================================  GraalVM Native Image: Generating 'base64tool' (executable)...  ========================================================================================================================  [1/8] Initializing...                                                                                    (1.7s @ 0.14GB)   Java version: 17.0.9+9, vendor version: GraalVM CE 17.0.9+9.1   Graal compiler: optimization level: 2, target machine: x86-64-v3   C compiler: gcc (linux, x86_64, 11.4.0)   Garbage collector: Serial GC (max heap size: 80% of RAM)  [2/8] Performing analysis...  [****]                                                                     (4.4s @ 0.27GB)     2,912 (71.67%) of  4,063 types reachable     3,536 (50.94%) of  6,942 fields reachable    13,209 (43.86%) of 30,116 methods reachable       907 types,     0 fields, and   348 methods registered for reflection        58 types,    58 fields, and    52 methods registered for JNI access         4 native libraries: dl, pthread, rt, z  [3/8] Building universe...                                                                               (0.9s @ 0.30GB)  [4/8] Parsing methods...      [*]                                                                        (0.6s @ 0.32GB)  [5/8] Inlining methods...     [***]                                                                      (0.5s @ 0.22GB)  [6/8] Compiling methods...    [**]                                                                       (4.5s @ 0.35GB)  [7/8] Layouting methods...    [*]                                                                        (0.7s @ 0.37GB)  [8/8] Creating image...       [*]                                                                        (1.1s @ 0.38GB)     4.42MB (36.75%) for code area:     7,506 compilation units     7.04MB (58.46%) for image heap:   89,275 objects and 5 resources   590.55kB ( 4.79%) for other data    12.03MB in total  ------------------------------------------------------------------------------------------------------------------------  Top 10 origins of code area:                                Top 10 object types in image heap:     3.37MB java.base                                         1009.70kB byte[] for code metadata   795.13kB svm.jar (Native Image)                             889.53kB java.lang.String   112.32kB java.logging                                       836.32kB byte[] for general heap data    62.07kB org.graalvm.nativeimage.base                       671.94kB java.lang.Class    24.15kB jdk.internal.vm.ci                                 665.65kB byte[] for java.lang.String    23.14kB org.graalvm.sdk                                    347.48kB java.util.HashMap$Node     6.11kB jdk.internal.vm.compiler                           250.25kB com.oracle.svm.core.hub.DynamicHubCompanion     1.68kB Base64Tool                                         169.02kB java.lang.String[]     1.35kB jdk.proxy1                                         165.57kB java.lang.Object[]     1.27kB jdk.proxy3                                         148.84kB byte[] for embedded resources     1.56kB for 2 more packages                                  1.20MB for 829 more object types  ------------------------------------------------------------------------------------------------------------------------  Recommendations:   HEAP: Set max heap for improved and more predictable memory usage.   CPU:  Enable more CPU features with '-march=native' for improved performance.  ------------------------------------------------------------------------------------------------------------------------                          0.7s (4.3% of total time) in 164 GCs | Peak RSS: 0.84GB | CPU load: 8.21  ------------------------------------------------------------------------------------------------------------------------  Produced artifacts:   /home/ant/native/base64tool (executable)  ========================================================================================================================  Finished generating 'base64tool' in 14.8s.                                            ä½¿ç”¨              ant@ant:~/native$ ./base64tool -help  -e Encode input string  -d Decode input string              ant@ant:~/native$ ./base64tool -e saveole  c2F2ZW9sZQ==  ant@ant:~/native$ ./base64tool -d c2F2ZW9sZQ==  saveole  ant@ant:~/native$                                             æ³¨æ„äº‹é¡¹          ä½¿ç”¨ native-image æ„å»ºå¯æ‰§è¡Œç¨‹åºæ—¶ï¼Œéœ€è¦æ³¨æ„å½“å‰çš„æ‰§è¡Œç›®å½•ã€‚å®ƒé»˜è®¤ä¼šæ‰«æå½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶(ä¸èƒ½åŒºåˆ† Java ç¨‹åºç›¸å…³çš„æ–‡ä»¶)ï¼Œå¯¼è‡´æ„å»ºå¤±è´¥ã€‚å»ºè®®åœ¨å•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­è¿›è¡Œç¼–è¯‘æ„å»ºã€‚      "
  },
  
  {
    "title": "Spring Native åˆä½“éªŒ",
    "url": "/posts/spring-native-first-cup/",
    "categories": "æŠ€æœ¯, Java",
    "tags": "Docker, JVM, Java, GraalVM",
    "date": "2024-04-07 13:30:30 +0800",
    





    
    "snippet": "  é¡¹ç›®èƒŒæ™¯          mqtt çš„æ¶ˆè´¹ç«¯åº”ç”¨ï¼Œåº”ç”¨é€»è¾‘è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯æ¶ˆè´¹ mqtt æ¶ˆæ¯ï¼Œç„¶ååšå¯¹åº”çš„æŒä¹…åŒ–(å†™å¤šè¯»å°‘)æ“ä½œ      é¡¹ç›®æ¶æ„ä¸»è¦ä½¿ç”¨åˆ°äº† Spring Boot ä½œä¸º IoC å®¹å™¨ï¼ŒMongoDB ä½œä¸ºå­˜å‚¨ï¼Œç„¶åå¼€æºçš„ mqtt-spring-boot-starter ä½œä¸º mqtt å®¢æˆ·ç«¯      å½“å‰å­˜åœ¨çš„é—®é¢˜ï¼š                  è¿‡åº¦ä¾èµ–...",
    "content": "  é¡¹ç›®èƒŒæ™¯          mqtt çš„æ¶ˆè´¹ç«¯åº”ç”¨ï¼Œåº”ç”¨é€»è¾‘è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯æ¶ˆè´¹ mqtt æ¶ˆæ¯ï¼Œç„¶ååšå¯¹åº”çš„æŒä¹…åŒ–(å†™å¤šè¯»å°‘)æ“ä½œ      é¡¹ç›®æ¶æ„ä¸»è¦ä½¿ç”¨åˆ°äº† Spring Boot ä½œä¸º IoC å®¹å™¨ï¼ŒMongoDB ä½œä¸ºå­˜å‚¨ï¼Œç„¶åå¼€æºçš„ mqtt-spring-boot-starter ä½œä¸º mqtt å®¢æˆ·ç«¯      å½“å‰å­˜åœ¨çš„é—®é¢˜ï¼š                  è¿‡åº¦ä¾èµ–ï¼šä¾èµ–äº† Spring Web ç­‰æœ¬ä¸éœ€è¦çš„ä¾èµ–(è¿™é‡Œçš„ Spring ä¸»è¦ä½œä¸º bean å®¹å™¨)          å¼¹æ€§ä¸è¶³ï¼šå½“æ¶ˆè´¹èƒ½åŠ›ä¸è¶³éœ€è¦æ·»åŠ å®ä¾‹çš„æ—¶å€™ï¼Œåº”ç”¨å¯åŠ¨é€Ÿåº¦ä¸å¤Ÿå¿« + é•œåƒä½“ç§¯è¾ƒå¤§(451M)          åŸºäºspring boot fat jar çš„åº”ç”¨å†…å­˜å ç”¨è¾ƒé«˜                      ç¯å¢ƒ          OS: Ubuntu 22.04      JDK: openjdk 21 GraalVM CE 21+35.1      IDE: IDEA Ultimate 2023.2.5      CPU: i5-12400      å†…å­˜: 32G 2666Hz        æ”¹é€ å†…å®¹          JDK 17 â†’ 21      Spring Boot 2.7.0 â†’ 3.3.0      Spring AOT      Dockerfile        å­˜åœ¨é—®é¢˜          build é˜¶æ®µé—®é¢˜                  commons-logging ä¸ spring jcl çš„å†²çª  â†’ å»é™¤å¯¹åº”çš„ commons-logging åŒ…                    runtime é˜¶æ®µé—®é¢˜                  profiles é—®é¢˜          Java 21 ResourceBundle  â†’ Caused by: java.util.MissingResourceException: Can't find bundle for base name oss, locale en_US                          ç”± ali-sdk-oss å¼•å…¥ï¼Œå‘ç°é¡¹ç›®ä¸­æ²¡ç”¨åˆ°ï¼Œç§»é™¤ä¾èµ–                                è¿è¡Œæ—¶ hutool ReflectUtil ä½¿ç”¨æŠ¥é”™                          æ”¹ç”±æ”¹å†™ä¾èµ–çš„å¼€æºä¸‰æ–¹åº“å®ç°ï¼Œé¿å…ä½¿ç”¨reflection              mqtt-spring-boot-starter å‡çº§ç‰ˆæœ¬åæœªå‡ºç°                                mqtt-client å‘¨æœŸæ€§æ–­è¿/é‡è¿          whether JVM Runtime shutdown hook is executed when spring native app exited                    CI/CD                  ç›®å‰é˜¿é‡Œäº‘æµæ°´çº¿é…ç½®é»˜è®¤ä¸æ”¯æŒï¼Œæµæ°´çº¿é›†ç¾¤é»˜è®¤ä½¿ç”¨çš„é…ç½®æ˜¯ 1C1G æœºå™¨ã€‚          å°†è‡ªå·±çš„ ecs ä¸»æœºä½œä¸ºæ„å»ºæœºå™¨ï¼Œå‘ç° 2g çš„å†…å­˜ä¸è¶³ä»¥è¿›è¡Œåº”ç”¨æ„å»ºï¼Œå¯è§ aot æ„å»ºçš„è¿‡ç¨‹æ˜¯å¾ˆè€—èµ„æºçš„ã€‚                      æ€»ç»“ä½“éªŒ          èµ„æºå ç”¨å¯¹æ¯”                                å¯¹æ¯”é¡¹          jar          native                                      å†…å­˜å ç”¨          212672          7312                          æ–‡ä»¶å¤§å°          28.7M          91.7M                          é•œåƒå¤§å°          320M          126M                          å¯åŠ¨æ—¶é—´          1.034s          0.077s                            å…¶ä»–æ›´è¯¦ç»†çš„ä¿¡æ¯è§ï¼šchat      "
  },
  
  {
    "title": "Win10 Docker ç¯å¢ƒå®‰è£…åŠè®¾ç½®",
    "url": "/posts/win10-docker-desktop-install-and-setting/",
    "categories": "æŠ€æœ¯, Docker",
    "tags": "Docker",
    "date": "2023-05-19 13:30:30 +0800",
    





    
    "snippet": "      å‰ç½®æ­¥éª¤                                                      å®‰è£… WSL2 - [å®‰è£… WSL              Microsoft Learn](https://learn.microsoft.com/zh-cn/windows/wsl/install)                               ...",
    "content": "      å‰ç½®æ­¥éª¤                                                      å®‰è£… WSL2 - [å®‰è£… WSL              Microsoft Learn](https://learn.microsoft.com/zh-cn/windows/wsl/install)                                          åœ¨ è®¾ç½® &gt; åº”ç”¨ &gt; ç¨‹åºå’ŒåŠŸèƒ½ &gt; å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½ ä¸­å‹¾é€‰ Hyper-V å’Œ é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ      é‡å¯ç”µè„‘              å®‰è£… Linux å‘è¡Œç‰ˆ          # åˆ—å‡ºå¯ç”¨ linux å‘è¡Œç‰ˆæœ¬  wsl --list --online  # å®‰è£…é€‰å®šå‘è¡Œç‰ˆ  wsl --install -d &lt;Distribution Name&gt;  # æŸ¥çœ‹ wsl å®‰è£…ä¿¡æ¯  wsl -l -v                      ä¸‹è½½ Docker Desktop for Windows å¹¶å®‰è£…      Docker Desktop é»˜è®¤å®‰è£…åˆ° C ç›˜ï¼Œå¯ä»¥å°†å®ƒçš„æ•°æ®å­˜å‚¨åˆ°å…¶ä»–ç›˜      # å…ˆå¤‡ä»½ docker-desktop å’Œ docker-desktop-data æ•°æ®  wsl --export docker-desktop docker-desktop.tar  wsl --export docker-desktop-data docker-desktop-data.tar      # å¸è½½ wsl ä¸­çš„ docker-desktop å’Œ docker-desktop-data  wsl --unregister docker-desktop  wsl --unregister docker-desktop-data      # åœ¨å…¶ä»–ç›˜åˆ›å»ºå­˜å‚¨ç›®å½•å¹¶å¯¼å…¥ä¹‹å‰çš„æ•°æ®  wsl --import docker-desktop D:\\data\\docker-desktop docker-desktop.tar  wsl --import docker-desktop-data D:\\data\\docker-desktop-data docker-desktop-data.tar        é‡å¯ç”µè„‘  é‡åˆ°çš„é—®é¢˜                  docker desktop å¸è½½é‡è£…åä¸èƒ½å¯åŠ¨          åŸå› ï¼šæ²¡æœ‰åœ¨ å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½ ä¸­å‹¾é€‰ Hyper-V                            wsl â€”list â€”online ä¸€ç›´æ²¡æœ‰å“åº”          å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½ è®¾ç½®å˜æ›´åéœ€è¦é‡å¯ç”µè„‘ç”Ÿæ•ˆ                            "
  },
  
  {
    "title": "Spring Boot MVC è‡ªå®šä¹‰å‚æ•°è§£æå™¨",
    "url": "/posts/spring-mvc-customized-method-argument-resolver/",
    "categories": "æŠ€æœ¯, Java",
    "tags": "Spring, Java, Spring Web MVC",
    "date": "2023-05-09 13:30:30 +0800",
    





    
    "snippet": "èƒŒæ™¯  é—ç•™ç³»ç»Ÿï¼šé—ç•™æ¥å£ç³»ç»Ÿä¸º Golang + Gin + MongoDB å®ç°, MongoDB collection çš„ field å­—æ®µä¸ºä¸­æ–‡åè€Œä¸”ä¸å›ºå®š(å¯ä»¥é€šè¿‡ excel æ–‡ä»¶è‡ªå®šä¹‰è¡¨å¤´çš„å½¢å¼æ·»åŠ ), æŸ¥è¯¢å‚æ•°æ˜¯ç›´æ¥ä¼ çš„ä¸­æ–‡å½¢å¼, è€Œä¸”ä¼ å‚ä¸å›ºå®š(queryå‚æ•°çš„ key å’Œ value éƒ½ä¸å›ºå®š)ï¼Œå¦‚ï¼š/api/v1/customers?å§“å=å¼ ä¸‰&amp;å½•å…¥æ—¶é—´=202...",
    "content": "èƒŒæ™¯  é—ç•™ç³»ç»Ÿï¼šé—ç•™æ¥å£ç³»ç»Ÿä¸º Golang + Gin + MongoDB å®ç°, MongoDB collection çš„ field å­—æ®µä¸ºä¸­æ–‡åè€Œä¸”ä¸å›ºå®š(å¯ä»¥é€šè¿‡ excel æ–‡ä»¶è‡ªå®šä¹‰è¡¨å¤´çš„å½¢å¼æ·»åŠ ), æŸ¥è¯¢å‚æ•°æ˜¯ç›´æ¥ä¼ çš„ä¸­æ–‡å½¢å¼, è€Œä¸”ä¼ å‚ä¸å›ºå®š(queryå‚æ•°çš„ key å’Œ value éƒ½ä¸å›ºå®š)ï¼Œå¦‚ï¼š/api/v1/customers?å§“å=å¼ ä¸‰&amp;å½•å…¥æ—¶é—´=2022-09-01 00:00:00&amp;å½•å…¥æ—¶é—´=2022-09-02 23:59:59  é—®é¢˜ï¼šgo å·¥ç¨‹å¸ˆç¦»èŒ, åç«¯åªæœ‰ java å·¥ç¨‹å¸ˆçš„æƒ…å†µä¸‹ï¼Œå°†æ­¤æ¥å£æ”¹ç”¨ java é‡å†™ä¸€éï¼Œä½†ä¼ å‚æ–¹å¼ä¸å˜(query key è¿˜æ˜¯ä¸ºä¸­æ–‡)å®ç°å¯é€‰æ–¹æ¡ˆ  æ–¹æ¡ˆä¸€ï¼šä¸ç”¨ java æ”¹å†™ï¼Œjava å·¥ç¨‹å¸ˆç»´æŠ¤ golang é¡¹ç›®          ä¼˜ç‚¹ï¼šä»£ç æ”¹åŠ¨æœ€å°ï¼Œå‡ºç° bug çš„æ¦‚ç‡ä¹Ÿæœ€å°      ç¼ºç‚¹ï¼šéœ€è¦èŠ±æ—¶é—´å­¦ä¹  go è¯­è¨€å’Œç›¸å…³é¡¹ç›®        æ–¹æ¡ˆäºŒï¼šè·å– HttpServletRequset å¯¹è±¡, åœ¨ç›¸åº”çš„æ¥å£å…¥å£å±‚è¿›è¡Œå‚æ•°å¤„ç†          ä¼˜ç‚¹ï¼šèƒ½å¤Ÿè·å–åˆ°æ‰€æœ‰å‚æ•°ï¼Œå¿«é€Ÿå®ç°åŠŸèƒ½      ç¼ºç‚¹ï¼šé’ˆå¯¹ç‰¹å®šæ¥å£å®ç°ï¼Œä¸åˆ©äºä»£ç æ‰©å±•        æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰ MVC å±‚å‚æ•°è§£æå™¨è§£æè¯·æ±‚å‚æ•°å¹¶ç»‘å®š          ä¼˜ç‚¹ï¼šèƒ½å¤ŸæŠ½å–æ­¤ç±»éœ€æ±‚çš„å…¬å…±å‚æ•°,ç»“åˆåå°„å’Œæ³¨è§£æœºåˆ¶åˆ©äºç›¸ä¼¼éœ€æ±‚çš„æ‰©å±•      ç¼ºç‚¹ï¼šç›¸å¯¹äºæ–¹æ¡ˆäºŒæ€§èƒ½å¯èƒ½ä¼šå·®ä¸€ç‚¹ã€‚                  æ¶‰åŠåˆ°åå°„å¤„ç†                    æ–¹æ¡ˆä¸‰å®ç°  MVC æ–¹æ³•å‚æ•°å¤„ç†å™¨æ¥å£ HandlerMethodArgumentResolverpublic interface HandlerMethodArgumentResolver {\t/**\t * æ­¤è§£æå™¨æ˜¯å¦æ”¯æŒè¯¥æ–¹æ³•å‚æ•°çš„è§£æ\t */\tboolean supportsParameter(MethodParameter parameter);\t/**\t * å°†æ‹¿åˆ°çš„åŸå§‹æ•°æ®è§£ææˆæƒ³è¦çš„å‚æ•°å¯¹è±¡\t * A {@link ModelAndViewContainer} provides access to the model for the\t * request. A {@link WebDataBinderFactory} provides a way to create\t * a {@link WebDataBinder} instance when needed for data binding and\t * type conversion purposes.\t * @param parameter the method parameter to resolve. This parameter must\t * have previously been passed to {@link #supportsParameter} which must\t * have returned {@code true}.\t * @param mavContainer the ModelAndViewContainer for the current request\t * @param webRequest the current request\t * @param binderFactory a factory for creating {@link WebDataBinder} instances\t * @return the resolved argument value, or {@code null} if not resolvable\t * @throws Exception in case of errors with the preparation of argument values\t */\t@Nullable\tObject resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer,\t\t\tNativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws Exception;}  å®ç°è‡ªå®šä¹‰æ–¹æ³•å‚æ•°å¤„ç†å™¨@Slf4jpublic class ZhFieldRequestResolver implements HandlerMethodArgumentResolver {    @Override    public boolean supportsParameter(MethodParameter parameter) {        // æœ‰ ZhBindConvertor æ³¨è§£çš„å‚æ•°æ‰è¿›è¡Œè§£æè½¬æ¢        return parameter.hasParameterAnnotation(ZhBindConvertor.class);    }    @Override    public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,                                  NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {        HttpServletRequest request = webRequest.getNativeRequest(HttpServletRequest.class);        assert request != null;        // è·å–å‚æ•°ç±»å‹ï¼Œæ ¹æ®å‚æ•°ç±»å‹åå°„åˆ›å»ºç±»å‹å®ä¾‹        Class&lt;?&gt; resultType = parameter.getParameterType();        return buildResultObject(resultType, request);    }    private Object buildResultObject(Class&lt;?&gt; resultType, HttpServletRequest request) throws InvocationTargetException,            NoSuchMethodException, InstantiationException, IllegalAccessException, IOException {        String method = request.getMethod();        // æ ¹æ®ä¸åŒçš„ http æ–¹æ³•ï¼Œä½¿ç”¨ä¸åŒçš„å‚æ•°æ„å»ºæ¨¡å¼        return switch (method) {            case \"POST\" -&gt; buildResultObjectForPost(resultType, request);            case \"GET\" -&gt; buildResultObjectForGet(resultType, request);            default -&gt; throw new IllegalStateException(\"ä¸æ”¯æŒçš„ http æ–¹æ³•ç±»å‹: \" + method);        };    }    /**     * GET æ–¹æ³•ç›´æ¥é€šè¿‡ {@link ServletRequest#getParameterMap()} æ–¹æ³•è·å–è¯·æ±‚å‚æ•°     */    private Object buildResultObjectForGet(Class&lt;?&gt; resultType, HttpServletRequest request) throws NoSuchMethodException,            InvocationTargetException, InstantiationException, IllegalAccessException {        Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();        Map&lt;String, List&lt;String&gt;&gt; pMap = new HashMap&lt;&gt;();        parameterMap.forEach((k, v) -&gt; pMap.put(k, List.of(v)));        Field[] fields = resultType.getDeclaredFields();        Class&lt;?&gt; superclass = resultType.getSuperclass();        Field[] superFields = null;        if (!superclass.equals(Object.class)) {            superFields = superclass.getDeclaredFields();        }        // åå°„å®ä¾‹åŒ–å‚æ•°å¯¹è±¡                Object instance = resultType.getDeclaredConstructor(null).newInstance(null);        // å¡«å……å¯¹è±¡å­—æ®µä¿¡æ¯                setFieldsForGet(fields, instance, parameterMap, pMap);        if (superFields != null) {            setFieldsForGet(superFields, instance, parameterMap, pMap);        }        return instance;    }    /**     * é€šè¿‡ field type æ¥è®¾ç½®å¯¹åº”çš„å­—æ®µå€¼     * https://docs.oracle.com/javase/tutorial/reflect/member/fieldTypes.html     */    private void setFieldsForGet(Field[] fields, Object instance, Map&lt;String, String[]&gt; parameterMap, Map&lt;String,            List&lt;String&gt;&gt; pMap) throws IllegalAccessException {        for (Field f : fields) {            f.setAccessible(true);            String typeName = f.getGenericType().getTypeName();            ZhBindAlias bindAlias = f.getAnnotation(ZhBindAlias.class);            if (Objects.nonNull(bindAlias)) {                String name = bindAlias.value();                int index = bindAlias.index();                String[] values = parameterMap.get(name);                if (values != null &amp;&amp; values.length &gt; 0) {                    Object convertValue = FieldTypeConvertor.FieldType.of(typeName).convert(values, index);                    f.set(instance, convertValue);                }                pMap.remove(name);                if (\"extras\".equals(f.getName()) &amp;&amp; !pMap.isEmpty()) {                    f.set(instance, pMap);                }            } else {                String[] values = parameterMap.get(f.getName());                if (values != null &amp;&amp; values.length &gt; 0) {                    Object convertValue = FieldTypeConvertor.FieldType.of(typeName).convertFirst(values);                    f.set(instance, convertValue);                }                pMap.remove(f.getName());            }        }    }    /**     * POST æ–¹æ³•é€šè¿‡è·å–è¯·æ±‚ä½“ json å­—ç¬¦ä¸²è½¬è¯·æ±‚å¯¹è±¡çš„æ–¹å¼è·å–å‚æ•°ä¿¡æ¯     */    private Object buildResultObjectForPost(Class&lt;?&gt; resultType, HttpServletRequest request) throws NoSuchMethodException,            InvocationTargetException, InstantiationException, IllegalAccessException, IOException {        // éªŒè¯ header çš„ Content-Type ä¸º application/json æ‰èƒ½è¿›è¡Œåç»­æ“ä½œ        String contentTypeHeader = request.getHeader(HttpHeaders.CONTENT_TYPE);        if (StringUtils.isBlank(contentTypeHeader) || !contentTypeHeader.equals(MediaType.APPLICATION_JSON_VALUE)) {            throw new IllegalStateException(\"è¯·è®¾ç½® Content-Type å€¼ä¸º application/json\");        }        Field[] fields = resultType.getDeclaredFields();        Class&lt;?&gt; superclass = resultType.getSuperclass();        Field[] superFields = null;        if (!superclass.equals(Object.class)) {            superFields = superclass.getDeclaredFields();        }        Object instance = resultType.getDeclaredConstructor(null).newInstance(null);        StringBuilder sb = new StringBuilder();        try (BufferedReader reader = request.getReader()) {            String line = reader.readLine();            while (StringUtils.isNotBlank(line)) {                sb.append(line);                line = reader.readLine();            }            log.info(\"uri:{},è¯·æ±‚ä½“å‚æ•°:{}\", request.getRequestURI(), sb);            JSONObject body = JSON.parseObject(sb.toString());            setFields(fields, body, instance);            setFields(superFields, body, instance);        }        return instance;    }    private void setFields(Field[] fields, JSONObject source, Object target) throws IllegalAccessException {        if (Objects.isNull(fields) || fields.length == 0) return;        for (Field f : fields) {            f.setAccessible(true);            String fName = f.getName();            String typeName = f.getGenericType().getTypeName();            ZhBindAlias bindAlias = f.getAnnotation(ZhBindAlias.class);            if (Objects.nonNull(bindAlias)) {                String name = bindAlias.value();                int index = bindAlias.index();                Object o = source.get(name);                if (\"extras\".equals(fName)) {                    f.set(target, jsonObjectToMap(source));                }                if (Objects.isNull(o)) continue;                Object convertValue = FieldTypeConvertor.FieldType.of(typeName).convertJsonObject(o, index, name);                f.set(target, convertValue);                source.remove(name);            } else {                Object o = source.get(fName);                if (Objects.isNull(o)) continue;                Object convertValue = FieldTypeConvertor.FieldType.of(typeName).convertJsonObject(o, 0, fName);                f.set(target, convertValue);                source.remove(fName);            }        }    }    private Map&lt;String, List&lt;String&gt;&gt; jsonObjectToMap(JSONObject object) {        TypeReference&lt;List&lt;String&gt;&gt; type = new TypeReference&lt;&gt;(){};        Map&lt;String, List&lt;String&gt;&gt; value = new HashMap&lt;&gt;();        object.forEach((k, v) -&gt; {            List&lt;String&gt; list = JSON.parseObject(v.toString(), type);            value.put(k, list);        });        return value;    }}  é…ç½® WebMvcConfigurer ä½¿è‡ªå®šä¹‰å‚æ•°è§£æå™¨ç”Ÿæ•ˆ@Configurationpublic class WebConfig implements WebMvcConfigurer {    @Override    public void addArgumentResolvers(List&lt;HandlerMethodArgumentResolver&gt; resolvers) {        resolvers.add(new ZhFieldRequestResolver());    }}  è‡ªå®šä¹‰æ³¨è§£ç”¨äºæ ‡æ³¨è§£æåçš„å‚æ•°æ¥æ”¶ç±»/** * ä¸­æ–‡è¯·æ±‚å‚æ•°è½¬æ¢,è¯·æ±‚å®ä½“å­—æ®µé…åˆ {@link ZhBindAlias} ä½¿ç”¨ * å®ç°åŸç†ï¼šè‡ªå®šä¹‰å®ç° mvc å‚æ•°è½¬æ¢å™¨ {@link org.springframework.web.method.support.HandlerMethodArgumentResolver} */@Documented@Target(ElementType.PARAMETER)@Retention(RetentionPolicy.RUNTIME)public @interface ZhBindConvertor {    boolean required() default true;}@Target(ElementType.FIELD)@Retention(RetentionPolicy.RUNTIME)public @interface ZhBindAlias {    /** å­—æ®µçš„ä¸­æ–‡åˆ«å */    String value();    /** åŒåçš„æƒ…å†µä¸‹ç»‘å®šåˆ°ç¬¬å‡ ä¸ªå‚æ•° */    int index() default 0;    /** æ˜¯å¦é»˜è®¤æ·»åŠ åˆ° query æ¡ä»¶æ„å»ºä¸­ */    boolean includeQuery() default true;}  æŠ½å–å…¬ç”¨æŸ¥è¯¢å‚æ•°ç±»/** * å…¬å…±æŸ¥è¯¢å‚æ•° */@Datapublic abstract class ZhSearchReq {    @ZhBindAlias(\"å½•å…¥æ—¶é—´\")    private String startTime;    @ZhBindAlias(value = \"å½•å…¥æ—¶é—´\", index = 1)    private String endTime;    /** è‡ªå®šä¹‰æŸ¥è¯¢å­—æ®µ(å¯¹åº”å˜åŒ–çš„éƒ¨åˆ†) */    @ZhBindAlias(value = \"extra\", includeQuery = false)    private Map&lt;String, List&lt;String&gt;&gt; extras;    /**     * æ’åºå­—æ®µ, json å­—ç¬¦ä¸²ï¼Œç¤ºä¾‹ï¼š     * {â€œå½•å…¥æ—¶é—´â€: \"ascend\", \"åˆ†é…æ—¶é—´\": \"descend\"}     * æŒ‰å½•å…¥æ—¶é—´å‡åºï¼Œåˆ†é…æ—¶é—´é™åºæ’åˆ—ï¼Œé»˜è®¤å‡åº     */    private String sorter;    @Min(1)    @ZhBindAlias(value = \"current\", includeQuery = false)    private Integer current = 1;    @Min(1)    @ZhBindAlias(value = \"pageSize\", includeQuery = false)    private Integer pageSize = 50;    /** é»˜è®¤æŒ‰å½•å…¥æ—¶é—´é™åºæ’åˆ— */    private Sort defaultSort() {        return Sort.by(\"å½•å…¥æ—¶é—´\").descending();    }    /**     * è·å–å­ç±»å­—æ®µçš„å€¼,å­ç±»éœ€è¦æœ‰ getter æ–¹æ³•     * @deprecated     */    private void filedCriteriaForSubClass(Criteria criteria, Field f) {        Method[] methods = this.getClass().getDeclaredMethods();        String name = f.getName();        Stream.of(methods)                .filter(m -&gt; m.getName().startsWith(\"get\") &amp;&amp; m.getName().toLowerCase().contains(name.toLowerCase()))                .findAny()                .ifPresent(m -&gt; {                    try {                        Object value = m.invoke(this, null);                        // filedCriteria(criteria, f, value);                    } catch (IllegalAccessException e) {                        e.printStackTrace();                    } catch (InvocationTargetException e) {                        e.printStackTrace();                    }                });    }    public Sort sort() {        String sorter = getSorter();        if (StringUtils.isEmpty(sorter)) return defaultSort();        HashMap sorterMap = JSONObject.parseObject(sorter, HashMap.class);        if (sorterMap.isEmpty()) return defaultSort();        List&lt;Sort.Order&gt; orders = new ArrayList&lt;&gt;(sorterMap.size());        sorterMap.forEach((k, v) -&gt; {            Sort.Order order;            if (v.equals(\"descend\")) {                order = Sort.Order.desc(k.toString());            } else {                order = Sort.Order.asc(k.toString());            }            orders.add(order);        });        if (orders.isEmpty()) return defaultSort();        return Sort.by(orders);    }    /**     * ç”±äºæ•°æ®åº“é€‰å‹åŸå› ï¼Œä¸ MongoDB æŸ¥è¯¢æ¡ä»¶å¼ºç»‘å®š     */    public Criteria getQueryCriteria() {        Criteria criteria = new Criteria();        Class&lt;? extends ZhSearchReq&gt; reqClass = this.getClass();        Class&lt;?&gt; superclass = reqClass.getSuperclass();        Field[] superFields = new Field[0];        if (!superclass.equals(Object.class)) {            superFields = superclass.getDeclaredFields();        }        Field[] fields = reqClass.getDeclaredFields();        Arrays.stream(fields).forEach(f -&gt; filedCriteria(criteria, f));        Arrays.stream(superFields).forEach(f -&gt; filedCriteria(criteria, f));        if (StringUtils.isNotBlank(getStartTime()) &amp;&amp; StringUtils.isNotBlank(getEndTime())) {            criteria.and(\"å½•å…¥æ—¶é—´\").gte(getStartTime()).lte(getEndTime());        }        // å¯¹äºåŠ¨æ€å‚æ•°çš„å¤„ç†        if (MapUtil.isNotEmpty(extras)) {            extras.forEach((k, v) -&gt; {                if (CollUtil.isNotEmpty(v)) {                    // warning ä¸å…·ä½“ä¸šåŠ¡é€»è¾‘ç›¸å…³,å¯ä»¥å‰ç«¯ç¡®å®šå…¬ç”¨çš„å¤„ç†æ¨¡å‹                    if (!v.contains(\"å…¨é€‰\")) {                        if (v.size() == 1) {                            // æ ¹æ®ä¸šåŠ¡é€»è¾‘ç¡®å®šå•å€¼çš„æŸ¥è¯¢å®šä¹‰                            criteria.and(k).is(v.get(0));                        } else {                            // æ ¹æ®ä¸šåŠ¡é€»è¾‘ç¡®å®šå¤šå€¼çš„æŸ¥è¯¢å®šä¹‰                            criteria.and(k).in(v);                        }                    }                }            });        }        return criteria;    }    /**     * å¯¹äºå•ä¸ªæŸ¥è¯¢å‚æ•°çš„å¤„ç†     */    protected void filedCriteria(Criteria criteria, Field f) {        String fName = f.getName();        if (\"sorter\".equals(fName)) return;        String typeName = f.getGenericType().getTypeName();        ZhBindAlias alias = f.getAnnotation(ZhBindAlias.class);        Object value = null;        try {            f.setAccessible(true);            value = f.get(this);        } catch (IllegalAccessException e) {            // å†…éƒ¨è°ƒç”¨ï¼Œä¸ä¼šæœ‰é—®é¢˜            e.printStackTrace();        }        if (Objects.isNull(value)) return;        if (Objects.nonNull(alias)) {            if (!alias.includeQuery()) return;            String where = alias.value();            if (\"java.lang.String\".equals(typeName) &amp;&amp; !where.contains(\"æ—¶é—´\")) {                // å•å€¼é‡‡ç”¨å‰ç¼€åŒ¹é…æŸ¥è¯¢                criteria.and(where).regex(\"^\" + value);            } else if (\"java.util.List&lt;java.lang.String&gt;\".equals(typeName) &amp;&amp; !where.contains(\"æ—¶é—´\")) {                List&lt;String&gt; values = (List&lt;String&gt;) value;                if (!values.contains(\"å…¨é€‰\")) {                    // å¤šå€¼é‡‡ç”¨ $in æŸ¥è¯¢                    criteria.and(where).in(values);                }            }        } else {            // ç­‰å€¼æŸ¥è¯¢            criteria.and(fName).is(value);        }    }}  æ‰©å±•æŸ¥è¯¢å‚æ•°ç±»@Datapublic class CustomerSearchReq extends ZhSearchReq {    @ZhBindAlias(\"è·Ÿè¿›çŠ¶æ€\")    private List&lt;String&gt; followState;    @ZhBindAlias(\"æ‰‹æœºå·\")    private String mobile;    @ZhBindAlias(\"å§“å\")    private String name;}  ä½¿ç”¨@GetMapping()@Operation(summary = \"çº¿ç´¢åˆ—è¡¨\")public R&lt;PageResult&lt;LinkedHashMap&gt;&gt; searchPage(@ZhBindConvertor CustomerSearchReq searchReq) {    return R.ok(customerSearchService.search(searchReq));}  é‡æ„è´¨é‡ä¿è¯-æµ‹è¯•ç”¨ä¾‹          åªå†™äº†é›†æˆæµ‹è¯•ç”¨ä¾‹ï¼Œä¿è¯åŸºæœ¬çš„å…¨æµç¨‹å‡†ç¡®æ€§      æ€»ç»“æ¶‰åŠçŸ¥è¯†ç‚¹  Spring          SpringMVC å‚æ•°ç»‘å®šæµç¨‹åŠè‡ªå®šä¹‰å‚æ•°è§£æå™¨å®ç°                  GET ç±»å‹è¯·æ±‚å‚æ•°è§£æ          POST ç±»å‹è¯·æ±‚å‚æ•°è§£æ                    è‡ªå®šä¹‰å‚æ•°è§£æå™¨å¦‚ä½•é…ç½®ç”Ÿæ•ˆ        åå°„:          æ ¹æ®ç±»å‹å®ä¾‹åŒ–å¯¹è±¡      å­—æ®µä¿¡æ¯è·å–ä¸å¯¹è±¡å­—æ®µè®¾ç½®      å­—æ®µç±»å‹ä¿¡æ¯è·å–å’ŒåŒºåˆ†å„ç§ä¸åŒç±»å‹      çˆ¶ç±»å­—æ®µä¿¡æ¯è·å–ä»¥åŠå­ç±»å­—æ®µä¿¡æ¯å¦‚ä½•è·å–      å¯¹è±¡ç¤ºä¾‹æ–¹æ³•ä¿¡æ¯è·å–å’Œæ–¹æ³•æ‰§è¡Œ        è‡ªå®šä¹‰æ³¨è§£çš„ä½¿ç”¨  æµ‹è¯•ç”¨ä¾‹          ä½¿ç”¨äº† testcontainers + docker mongodb + mockmvc ç¼–å†™é›†æˆæµ‹è¯•ç”¨ä¾‹      json æ–‡ä»¶ + MongoTemplate#insert å®Œæˆæµ‹è¯•å‰æ•°æ®å‡†å¤‡      MongoTemplate#dropCollection å®Œæˆæµ‹è¯•åæ•°æ®æ¸…ç†      MockMvc å¯¹äºå“åº”æ•°æ®çš„å„ç§å‡†ç¡®æ€§æ–­è¨€      é‡åˆ°çš„é—®é¢˜  çˆ¶ç±»æ–¹æ³•åå°„è·å–å­ç±»å­—æ®µçš„å–å€¼(å­ç±»å®ä¾‹è°ƒç”¨æ—¶)          è§£å†³ï¼šå¿˜è®°äº† f.setAccessible(true);      æ²¡æœ‰ f.setAccessible(true) çš„æ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨è°ƒç”¨åå°„æ–¹æ³• getter + field name çš„æ–¹å¼è·å–å€¼ï¼Œä½†å¾ˆä¸ clean ä¹Ÿä¼šæœ‰æ›´å¤§æ€§èƒ½å¼€é”€ï¼Ÿbenchmark        spring doc openapi å‚æ•°è½¬æ¢å™¨é—®é¢˜          é€šè¿‡ WebMvcConfigurer#addArgumentResolvers è§£å†³      å­˜åœ¨çš„é—®é¢˜åŠå¯ä»¥ç»§ç»­æ”¹è¿›çš„åœ°æ–¹  å…¬ç”¨æŸ¥è¯¢å‚æ•°ç±»åªæ”¯æŒä¸€å±‚ç»§æ‰¿ä½“ç³»ç±»çš„å¤„ç†ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡å®é™…éœ€è¦åšæ”¯æŒå¤„ç†æˆ–åšè§„èŒƒ  å…¬ç”¨æŸ¥è¯¢å‚æ•°ç±»è·å– query æ¡ä»¶çš„æ–¹æ³•ä¸æ•°æ®åº“ç±»å‹ä»¥åŠä¸šåŠ¡å¼ºç»‘å®šï¼Œå¯ä»¥åœ¨è¿™ä¸€å±‚æ ¹æ®å®é™…éœ€æ±‚å†åšä¸€å±‚æŠ½è±¡  ç”±äºä¸šåŠ¡é€»è¾‘ç®€å•ï¼Œæ²¡æœ‰åšå•å…ƒæµ‹è¯•ï¼Œåªåšäº†é›†æˆæµ‹è¯•  åå°„è·å–å­—æ®µä¿¡æ¯æ—¶æ²¡æœ‰åšç¼“å­˜ï¼Œå¯ä»¥ benchmark ä¸‹çœ‹çœ‹å¯¹äºåº”ç”¨çš„æ€§èƒ½æå‡å‚è€ƒåŠç¤ºä¾‹ä»£ç ä»£ç ï¼šcustom_mvc_method_argument_resolverå‚è€ƒï¼šSpring From the Trenches: Creating a Custom HandlerMethodArgumentResolvermvc-ann-methodsoracle-reflect-fieldTypes"
  }
  
]

